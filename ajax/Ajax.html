<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一天 | 笔记栈</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/img/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.0d7c1303.js" as="script"><link rel="preload" href="/assets/js/2.1fe0b50b.js" as="script"><link rel="preload" href="/assets/js/8.0e4354f9.js" as="script"><link rel="prefetch" href="/assets/js/10.2978dd1f.js"><link rel="prefetch" href="/assets/js/11.0dbaa531.js"><link rel="prefetch" href="/assets/js/12.32c02705.js"><link rel="prefetch" href="/assets/js/13.109a51a8.js"><link rel="prefetch" href="/assets/js/14.515ca27a.js"><link rel="prefetch" href="/assets/js/15.5ded3296.js"><link rel="prefetch" href="/assets/js/16.8bc52c4e.js"><link rel="prefetch" href="/assets/js/17.68df63de.js"><link rel="prefetch" href="/assets/js/18.89b1b877.js"><link rel="prefetch" href="/assets/js/19.901364af.js"><link rel="prefetch" href="/assets/js/20.5481b80d.js"><link rel="prefetch" href="/assets/js/21.2a144945.js"><link rel="prefetch" href="/assets/js/22.70831219.js"><link rel="prefetch" href="/assets/js/23.3b0c302e.js"><link rel="prefetch" href="/assets/js/24.878e1e96.js"><link rel="prefetch" href="/assets/js/25.9ff49721.js"><link rel="prefetch" href="/assets/js/26.093c8bdc.js"><link rel="prefetch" href="/assets/js/27.401b5c78.js"><link rel="prefetch" href="/assets/js/28.dc1c7c43.js"><link rel="prefetch" href="/assets/js/29.40e51e71.js"><link rel="prefetch" href="/assets/js/3.ac9d9143.js"><link rel="prefetch" href="/assets/js/30.b76a99b4.js"><link rel="prefetch" href="/assets/js/31.c3ef67ce.js"><link rel="prefetch" href="/assets/js/32.6c5637f7.js"><link rel="prefetch" href="/assets/js/33.a43732df.js"><link rel="prefetch" href="/assets/js/34.944b27fe.js"><link rel="prefetch" href="/assets/js/35.c2719e80.js"><link rel="prefetch" href="/assets/js/36.db5072a0.js"><link rel="prefetch" href="/assets/js/37.3aac3f33.js"><link rel="prefetch" href="/assets/js/38.ac02531c.js"><link rel="prefetch" href="/assets/js/39.b9d37857.js"><link rel="prefetch" href="/assets/js/4.e05c873c.js"><link rel="prefetch" href="/assets/js/40.750e94fc.js"><link rel="prefetch" href="/assets/js/41.941fe774.js"><link rel="prefetch" href="/assets/js/42.bcdffcaa.js"><link rel="prefetch" href="/assets/js/43.1188d721.js"><link rel="prefetch" href="/assets/js/44.0ba6bb4b.js"><link rel="prefetch" href="/assets/js/45.a98c08d8.js"><link rel="prefetch" href="/assets/js/46.1339ab8c.js"><link rel="prefetch" href="/assets/js/47.1e9f1793.js"><link rel="prefetch" href="/assets/js/48.0b65993c.js"><link rel="prefetch" href="/assets/js/49.98d284b0.js"><link rel="prefetch" href="/assets/js/5.f3e6ed41.js"><link rel="prefetch" href="/assets/js/50.40c11909.js"><link rel="prefetch" href="/assets/js/51.401f93f0.js"><link rel="prefetch" href="/assets/js/52.b0168dbe.js"><link rel="prefetch" href="/assets/js/53.8b60059b.js"><link rel="prefetch" href="/assets/js/54.161c06e4.js"><link rel="prefetch" href="/assets/js/55.afd26206.js"><link rel="prefetch" href="/assets/js/56.55d94850.js"><link rel="prefetch" href="/assets/js/57.ae35ff7c.js"><link rel="prefetch" href="/assets/js/58.96b6abba.js"><link rel="prefetch" href="/assets/js/59.91f247f9.js"><link rel="prefetch" href="/assets/js/6.498ab014.js"><link rel="prefetch" href="/assets/js/60.2b43d161.js"><link rel="prefetch" href="/assets/js/61.9ebe816a.js"><link rel="prefetch" href="/assets/js/62.bc73408a.js"><link rel="prefetch" href="/assets/js/63.f8745496.js"><link rel="prefetch" href="/assets/js/64.4ae7ce85.js"><link rel="prefetch" href="/assets/js/65.23ecc3e4.js"><link rel="prefetch" href="/assets/js/66.1d24d480.js"><link rel="prefetch" href="/assets/js/67.6042bfed.js"><link rel="prefetch" href="/assets/js/68.ed1e1ed8.js"><link rel="prefetch" href="/assets/js/69.28d1024d.js"><link rel="prefetch" href="/assets/js/7.3f5168c2.js"><link rel="prefetch" href="/assets/js/70.5ff6d4e4.js"><link rel="prefetch" href="/assets/js/71.bd57315c.js"><link rel="prefetch" href="/assets/js/72.e93c0d6e.js"><link rel="prefetch" href="/assets/js/73.4229454d.js"><link rel="prefetch" href="/assets/js/74.c2eb2bad.js"><link rel="prefetch" href="/assets/js/75.7eca9a4e.js"><link rel="prefetch" href="/assets/js/76.b83f903e.js"><link rel="prefetch" href="/assets/js/77.b9a22162.js"><link rel="prefetch" href="/assets/js/78.2450176d.js"><link rel="prefetch" href="/assets/js/79.ff4267c4.js"><link rel="prefetch" href="/assets/js/80.abebe711.js"><link rel="prefetch" href="/assets/js/81.d8369dc4.js"><link rel="prefetch" href="/assets/js/82.5da13948.js"><link rel="prefetch" href="/assets/js/83.deb172fd.js"><link rel="prefetch" href="/assets/js/84.727650ec.js"><link rel="prefetch" href="/assets/js/85.50b1b4ef.js"><link rel="prefetch" href="/assets/js/86.90bb267e.js"><link rel="prefetch" href="/assets/js/9.de4e9e4c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="笔记栈" class="logo"> <span class="site-name can-hide">笔记栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          html
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端基础/第一天html笔记/" class="nav-link">
  html-one
</a></li><li class="dropdown-subitem"><a href="/前端基础/第二天html总结/" class="nav-link">
  html-two
</a></li></ul></li><li class="dropdown-item"><h4>
          css
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端基础/css第一天/" class="nav-link">
  css-one
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第二天/" class="nav-link">
  css-two
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第三天/" class="nav-link">
  css-twree
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第四天/" class="nav-link">
  css-four
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day07-前端基础CSS第五天/" class="nav-link">
  css-five
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day08-前端基础CSS第六天/" class="nav-link">
  css-six
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day09-前端基础CSS第七天/" class="nav-link">
  css-seven
</a></li><li class="dropdown-subitem"><a href="/前端基础/day10-HTML5&amp;CSS3提高/" class="nav-link">
  css html提高
</a></li><li class="dropdown-subitem"><a href="/前端基础/移动端/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/前端基础/day01/" class="nav-link">
  移动端布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/basis/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/js/senior/" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/webapi/webapinew/" class="nav-link">
  webapi新
</a></li><li class="dropdown-item"><!----> <a href="/webapi/pk webapi/" class="nav-link">
  webapi
</a></li><li class="dropdown-item"><!----> <a href="/js/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/跨域防抖节流 Promise/" class="nav-link">
  跨域防抖节流
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git&amp;ajax&amp;JQ" class="dropdown-title"><span class="title">git&amp;ajax&amp;JQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="git&amp;ajax&amp;JQ" class="mobile-dropdown-title"><span class="title">git&amp;ajax&amp;JQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/git/Git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/ajax/Ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/jq/JQuery/" class="nav-link">
  JQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node" class="dropdown-title"><span class="title">node</span> <span class="arrow down"></span></button> <button type="button" aria-label="node" class="mobile-dropdown-title"><span class="title">node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/Node入门及模块系统/" class="nav-link">
  入门
</a></li><li class="dropdown-item"><!----> <a href="/project/大事件/大事件-01/" class="nav-link">
  node大事件
</a></li><li class="dropdown-item"><!----> <a href="/node/NPM/" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/node/接口测试工具/" class="nav-link">
  接口测试工具
</a></li><li class="dropdown-item"><!----> <a href="/node/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/node/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/node/ES6/" class="nav-link">
  es6
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/vue基础/笔记/" class="nav-link">
  vue基础
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/03-前端路由/" class="nav-link">
  前端路由
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/03-前后端对接/" class="nav-link">
  前后端交互
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/04-前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/05-综合案例/" class="nav-link">
  综合案例
</a></li></ul></li><li class="dropdown-item"><h4>
          vue进阶目录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/vue进阶/vue进阶/" class="nav-link">
  vue进阶
</a></li><li class="dropdown-subitem"><a href="/vue/vuex/outline-vuex/" class="nav-link">
  vuex
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue项目" class="dropdown-title"><span class="title">vue项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue项目" class="mobile-dropdown-title"><span class="title">vue项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          大事件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/大事件/大事件-01/" class="nav-link">
  node大事件
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/project/头条移动/01-头条-Mobile-项目初始化/" class="nav-link">
  头条移动
</a></li><li class="dropdown-item"><!----> <a href="/project/头条综合案例/01-头条-PC-项目初始化/" class="nav-link">
  头条pc综合案例
</a></li><li class="dropdown-item"><!----> <a href="/project/中台/01-HR-项目初始化/" class="nav-link">
  中台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/question/" class="nav-link">
  问题总结小册
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          html
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端基础/第一天html笔记/" class="nav-link">
  html-one
</a></li><li class="dropdown-subitem"><a href="/前端基础/第二天html总结/" class="nav-link">
  html-two
</a></li></ul></li><li class="dropdown-item"><h4>
          css
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端基础/css第一天/" class="nav-link">
  css-one
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第二天/" class="nav-link">
  css-two
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第三天/" class="nav-link">
  css-twree
</a></li><li class="dropdown-subitem"><a href="/前端基础/css第四天/" class="nav-link">
  css-four
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day07-前端基础CSS第五天/" class="nav-link">
  css-five
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day08-前端基础CSS第六天/" class="nav-link">
  css-six
</a></li><li class="dropdown-subitem"><a href="/前端基础/笔记-day09-前端基础CSS第七天/" class="nav-link">
  css-seven
</a></li><li class="dropdown-subitem"><a href="/前端基础/day10-HTML5&amp;CSS3提高/" class="nav-link">
  css html提高
</a></li><li class="dropdown-subitem"><a href="/前端基础/移动端/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/前端基础/day01/" class="nav-link">
  移动端布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/basis/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/js/senior/" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/webapi/webapinew/" class="nav-link">
  webapi新
</a></li><li class="dropdown-item"><!----> <a href="/webapi/pk webapi/" class="nav-link">
  webapi
</a></li><li class="dropdown-item"><!----> <a href="/js/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/跨域防抖节流 Promise/" class="nav-link">
  跨域防抖节流
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git&amp;ajax&amp;JQ" class="dropdown-title"><span class="title">git&amp;ajax&amp;JQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="git&amp;ajax&amp;JQ" class="mobile-dropdown-title"><span class="title">git&amp;ajax&amp;JQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/git/Git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/ajax/Ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/jq/JQuery/" class="nav-link">
  JQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node" class="dropdown-title"><span class="title">node</span> <span class="arrow down"></span></button> <button type="button" aria-label="node" class="mobile-dropdown-title"><span class="title">node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/Node入门及模块系统/" class="nav-link">
  入门
</a></li><li class="dropdown-item"><!----> <a href="/project/大事件/大事件-01/" class="nav-link">
  node大事件
</a></li><li class="dropdown-item"><!----> <a href="/node/NPM/" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/node/接口测试工具/" class="nav-link">
  接口测试工具
</a></li><li class="dropdown-item"><!----> <a href="/node/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/node/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/node/ES6/" class="nav-link">
  es6
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/vue基础/笔记/" class="nav-link">
  vue基础
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/03-前端路由/" class="nav-link">
  前端路由
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/03-前后端对接/" class="nav-link">
  前后端交互
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/04-前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-subitem"><a href="/vue/vue基础/05-综合案例/" class="nav-link">
  综合案例
</a></li></ul></li><li class="dropdown-item"><h4>
          vue进阶目录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/vue进阶/vue进阶/" class="nav-link">
  vue进阶
</a></li><li class="dropdown-subitem"><a href="/vue/vuex/outline-vuex/" class="nav-link">
  vuex
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue项目" class="dropdown-title"><span class="title">vue项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue项目" class="mobile-dropdown-title"><span class="title">vue项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          大事件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/大事件/大事件-01/" class="nav-link">
  node大事件
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/project/头条移动/01-头条-Mobile-项目初始化/" class="nav-link">
  头条移动
</a></li><li class="dropdown-item"><!----> <a href="/project/头条综合案例/01-头条-PC-项目初始化/" class="nav-link">
  头条pc综合案例
</a></li><li class="dropdown-item"><!----> <a href="/project/中台/01-HR-项目初始化/" class="nav-link">
  中台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题" class="dropdown-title"><span class="title">问题</span> <span class="arrow down"></span></button> <button type="button" aria-label="问题" class="mobile-dropdown-title"><span class="title">问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/question/" class="nav-link">
  问题总结小册
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>第一天</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ajax/Ajax.html#思考-上网看到的内容在哪里" class="sidebar-link">思考：上网看到的内容在哪里？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#服务器" class="sidebar-link">服务器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#资源" class="sidebar-link">资源</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#数据" class="sidebar-link">数据</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#浏览器-服务器交互模型" class="sidebar-link">浏览器-服务器交互模型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#ajax介绍" class="sidebar-link">Ajax介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#ajax的应用场景" class="sidebar-link">Ajax的应用场景</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#get和post请求方式" class="sidebar-link">GET和POST请求方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#jquery中封装的ajax方法" class="sidebar-link">jQuery中封装的Ajax方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#获取服务器上的数据资源" class="sidebar-link">获取服务器上的数据资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#案例" class="sidebar-link">案例</a></li></ul></li><li><a href="/ajax/Ajax.html#向服务器提交数据" class="sidebar-link">向服务器提交数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#语法-2" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#案例-2" class="sidebar-link">案例</a></li></ul></li><li><a href="/ajax/Ajax.html#接口及接口文档" class="sidebar-link">接口及接口文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#概念及说明" class="sidebar-link">概念及说明</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#案例-3" class="sidebar-link">案例</a></li></ul></li><li><a href="/ajax/Ajax.html#network工具" class="sidebar-link">network工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#聊天机器人案例" class="sidebar-link">聊天机器人案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#效果展示" class="sidebar-link">效果展示</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#参考代码" class="sidebar-link">参考代码</a></li></ul></li><li><a href="/ajax/Ajax.html#同步请求和异步请求" class="sidebar-link">同步请求和异步请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#练习" class="sidebar-link">练习</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#同步的ajax请求-了解" class="sidebar-link">同步的Ajax请求（了解）</a></li></ul></li><li><a href="/ajax/Ajax.html#常用请求方式的区别" class="sidebar-link">常用请求方式的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#深入理解jquery方法的请求参数" class="sidebar-link">深入理解jQuery方法的请求参数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#serialize和serializearray方法" class="sidebar-link">serialize和serializeArray方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#关于html表单的补充" class="sidebar-link">关于HTML表单的补充</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#form标签" class="sidebar-link">form标签</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#表单域" class="sidebar-link">表单域</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#按钮" class="sidebar-link">按钮</a></li></ul></li><li><a href="/ajax/Ajax.html#模板引擎-art-template" class="sidebar-link">模板引擎 art-template</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#案例中渲染数据的问题" class="sidebar-link">案例中渲染数据的问题</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#模板引擎简介" class="sidebar-link">模板引擎简介</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#尝试编写一个实现模板引擎功能的函数" class="sidebar-link">尝试编写一个实现模板引擎功能的函数</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#art-template模板引擎" class="sidebar-link">art-template模板引擎</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#art-template基本使用方法" class="sidebar-link">art-template基本使用方法</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#模板语法" class="sidebar-link">模板语法</a></li></ul></li><li><a href="/ajax/Ajax.html#新闻列表案例" class="sidebar-link">新闻列表案例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#xmlhttprequest对象简介" class="sidebar-link">XMLHttpRequest对象简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#纲要" class="sidebar-link">纲要</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#历史" class="sidebar-link">历史</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/ajax/Ajax.html#实现ajax的get请求" class="sidebar-link">实现Ajax的GET请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#步骤" class="sidebar-link">步骤</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#基础代码" class="sidebar-link">基础代码</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#请求参数" class="sidebar-link">请求参数</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#其他说明" class="sidebar-link">其他说明</a></li></ul></li><li><a href="/ajax/Ajax.html#实现ajax的post请求" class="sidebar-link">实现Ajax的POST请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#步骤-2" class="sidebar-link">步骤</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#基础代码-2" class="sidebar-link">基础代码</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#请求体" class="sidebar-link">请求体</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#其他说明-2" class="sidebar-link">其他说明</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#content-type" class="sidebar-link">Content-Type</a></li></ul></li><li><a href="/ajax/Ajax.html#对请求参数进行编码" class="sidebar-link">对请求参数进行编码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#什么是url编码" class="sidebar-link">什么是URL编码？</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#为什么要对请求参数进行编码" class="sidebar-link">为什么要对请求参数进行编码</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#编码能够解决的问题" class="sidebar-link">编码能够解决的问题</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#如何进行url编码" class="sidebar-link">如何进行URL编码</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#小结-2" class="sidebar-link">小结</a></li></ul></li><li><a href="/ajax/Ajax.html#readystate属性" class="sidebar-link">readyState属性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#onreadystatechange事件" class="sidebar-link">onreadystatechange事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#代替onload事件解决兼容问题" class="sidebar-link">代替onload事件解决兼容问题</a></li></ul></li><li><a href="/ajax/Ajax.html#封装ajax" class="sidebar-link">封装Ajax</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#json" class="sidebar-link">JSON</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#json在ajax中的作用" class="sidebar-link">JSON在Ajax中的作用</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#编写json" class="sidebar-link">编写JSON</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#json和js数据转换" class="sidebar-link">JSON和JS数据转换</a></li></ul></li><li><a href="/ajax/Ajax.html#设置http请求时限" class="sidebar-link">设置HTTP请求时限</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#formdata对象" class="sidebar-link">FormData对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#介绍-2" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#基本语法" class="sidebar-link">基本语法</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#使用formdata的注意事项-必看" class="sidebar-link">使用FormData的注意事项（必看）</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#formdata配合xhr对象" class="sidebar-link">FormData配合XHR对象</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#formdata配合jquery使用" class="sidebar-link">FormData配合jQuery使用</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#formdata和serialize的区别" class="sidebar-link">FormData和serialize的区别</a></li></ul></li><li><a href="/ajax/Ajax.html#使用formdata的案例" class="sidebar-link">使用FormData的案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#上传文件并显示进度条-原生代码" class="sidebar-link">上传文件并显示进度条（原生代码）</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#上传文件并显示进度条-jquery实现" class="sidebar-link">上传文件并显示进度条（jQuery实现）</a></li></ul></li><li><a href="/ajax/Ajax.html#案例说明" class="sidebar-link">案例说明</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#准备工作" class="sidebar-link">准备工作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#创建案例目录" class="sidebar-link">创建案例目录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/Ajax.html#layui介绍" class="sidebar-link">layui介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#介绍-3" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#使用" class="sidebar-link">使用</a></li></ul></li><li><a href="/ajax/Ajax.html#登录功能" class="sidebar-link">登录功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#准备工作-2" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#页面布局" class="sidebar-link">页面布局</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#完成登录功能" class="sidebar-link">完成登录功能</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#token原理" class="sidebar-link">token原理</a></li></ul></li><li><a href="/ajax/Ajax.html#类别页面布局" class="sidebar-link">类别页面布局</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#准备工作-3" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#页面布局-2" class="sidebar-link">页面布局</a></li></ul></li><li><a href="/ajax/Ajax.html#获取类别列表" class="sidebar-link">获取类别列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#ajax请求-获取分类列表数据" class="sidebar-link">ajax请求，获取分类列表数据</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#通过模板引擎渲染数据" class="sidebar-link">通过模板引擎渲染数据</a></li></ul></li><li><a href="/ajax/Ajax.html#删除类别" class="sidebar-link">删除类别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#注册事件并获取分类id" class="sidebar-link">注册事件并获取分类id</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#使用弹出层" class="sidebar-link">使用弹出层</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#发送ajax请求-完成删除" class="sidebar-link">发送Ajax请求，完成删除</a></li></ul></li><li><a href="/ajax/Ajax.html#添加类别" class="sidebar-link">添加类别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#点击按钮-实现弹层" class="sidebar-link">点击按钮，实现弹层</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#设置弹层的内容" class="sidebar-link">设置弹层的内容</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#提交表单数据-完成添加" class="sidebar-link">提交表单数据，完成添加</a></li></ul></li><li><a href="/ajax/Ajax.html#编辑类别" class="sidebar-link">编辑类别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#点击编辑按钮-实现弹出层" class="sidebar-link">点击编辑按钮，实现弹出层</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#设置input的默认值" class="sidebar-link">设置input的默认值</a></li><li class="sidebar-sub-header"><a href="/ajax/Ajax.html#提交表单-完成编辑" class="sidebar-link">提交表单，完成编辑</a></li></ul></li><li><a href="/ajax/Ajax.html#优化项目" class="sidebar-link">优化项目</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第一天"><a href="#第一天" class="header-anchor">#</a> 第一天</h1> <h2 id="思考-上网看到的内容在哪里"><a href="#思考-上网看到的内容在哪里" class="header-anchor">#</a> 思考：上网看到的内容在哪里？</h2> <p>无论是使用手机浏览器，还是PC浏览器，上网时看到的内容存在于哪里？</p> <p>具体一点，我们上网看到的视频、浏览的网页、听到的音乐、看到的图片等等，他们在哪里？</p> <ul><li>它们在一台电脑里</li> <li>我们称这台电脑为 <strong>服务器</strong></li></ul> <h2 id="服务器"><a href="#服务器" class="header-anchor">#</a> 服务器</h2> <p>服务器本质上也是一台电脑，也具有硬盘、CUP、内存等等必要的硬件。</p> <p>只不过服务器的重要硬件比家用计算机要好。</p> <p>服务器的作用</p> <ul><li>存储一个网站的文件（HTML、CSS、JS、图片、音乐.....）</li> <li>提供网站的文件给用户</li></ul> <p>怎么获取服务器</p> <ul><li>购买（京东、淘宝......）</li> <li>租赁（阿里云、腾讯云......）</li></ul> <blockquote><p>学习阶段，没有必要购买服务器，老师已经把服务器准备（租）好了，我们可以共用一个服务器。</p></blockquote> <h2 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h2> <p>通俗的讲，服务器上的 网页(html文件)、图片、音乐、视频、字体文件、CSS文件、JS文件等等都称之为资源。所以<strong>资源代指服务器上存储的内容</strong>。</p> <h2 id="数据"><a href="#数据" class="header-anchor">#</a> 数据</h2> <p>网页中使用的部分数据，放到服务器上了，它算不算是资源呢？</p> <p>答：数据是资源。而且是一个网站的灵魂。</p> <ul><li>HTML是骨架</li> <li>CSS是颜值</li> <li>JS是行为</li> <li><strong>数据是灵魂</strong></li></ul> <p><strong>☞ 了解</strong></p> <p>服务器多数情况都使用数据库、数据表的方式来存储数据，和我们平时见到的表格差不多，形式如下：</p> <table><thead><tr><th>id</th> <th>bookname</th> <th>author</th> <th>publisher</th></tr></thead> <tbody><tr><td>1</td> <td>西游记</td> <td>唐僧</td> <td>大唐出版社</td></tr> <tr><td>2</td> <td>水浒传</td> <td>宋江</td> <td>大宋出版社</td></tr> <tr><td>3</td> <td>三国演义</td> <td>罗贯中</td> <td>三国出版社</td></tr> <tr><td>4</td> <td>斗破苍穹</td> <td>土豆</td> <td>仙侠出版社</td></tr></tbody></table> <h2 id="浏览器-服务器交互模型"><a href="#浏览器-服务器交互模型" class="header-anchor">#</a> 浏览器-服务器交互模型</h2> <p><img src="Ajax.assets/image-20210107112010772.png" alt="image-20210107112010772"></p> <p>浏览器-服务器交互模型，是由 <strong>请求(request) --- 响应(response)</strong> 组合而成的。</p> <h2 id="ajax介绍"><a href="#ajax介绍" class="header-anchor">#</a> Ajax介绍</h2> <p>AJAX是异步的JavaScript和XML（<strong>A</strong>synchronous <strong>J</strong>avaScript <strong>A</strong>nd <strong>X</strong>ML）。简单点说，就是使用浏览器内置对象 <code>XMLHttpRequest</code> 与服务器通信。</p> <p><strong>Ajax是一种技术，通过浏览器内置对象和服务器进行数据交互的技术</strong>。</p> <p>它可以使用JSON，XML，HTML和text文本等格式发送和接收数据。</p> <p>AJAX最吸引人的就是它的“异步”特性，也就是说它可以在不重新刷新页面的情况下与服务器通信，交换数据，或更新页面。</p> <p>你可以使用AJAX最主要的两个特性做下列事：</p> <ul><li>在不重新加载页面的情况下发送请求给服务器。</li> <li>接受并使用从服务器发来的数据。</li></ul> <h2 id="ajax的应用场景"><a href="#ajax的应用场景" class="header-anchor">#</a> Ajax的应用场景</h2> <ul><li>搜索建议提示（比如百度、京东、淘宝等等）</li> <li>地图（百度地图）</li> <li>验证用户名是否存在</li> <li>网页聊天室</li> <li>无刷新的分页</li> <li>.....</li> <li>总之，<strong>在不刷新页面的情况下</strong>，还要完成页面和服务器的数据交互，都可以使用Ajax</li></ul> <p><strong>☞ 也许你会想到，使用浏览器输入网址，回车，已经可以请求到页面了，为什么还需要Ajax呢？</strong></p> <ul><li>当在浏览器中输入网址，回车，确实是向服务器发送了请求，这是浏览器自主发送的请求。</li> <li>如果希望页面中局部的数据，比如某个列表中，某个表格中的数据更新，那就用到了Ajax了，如下视频所示。（<strong>点击播放下面的视频</strong>）</li></ul> <h2 id="get和post请求方式"><a href="#get和post请求方式" class="header-anchor">#</a> GET和POST请求方式</h2> <p>当使用浏览器和服务器进行数据交互时，多数都是由浏览器端发起请求，然后才能获取响应结果。</p> <p>浏览器能够发起的请求，又分为多种请求方式，但常用的请求方式只有下面两种：</p> <ul><li><strong>GET</strong> ，获取；如果向服务器发送请求，获取服务器的资源，使用GET方式
<ul><li>比如获取页面中需要的数据</li> <li>比如获取一个用户的信息（用户名、昵称、头像等）</li></ul></li> <li><strong>POST</strong>，邮寄（提交）。如果提交数据给服务器，那么使用POST方式。
<ul><li>比如，登录、注册（提交账号和密码给服务器）</li> <li>比如，添加评论，发布评论（贴吧中有）</li></ul></li></ul> <p>PS:</p> <p><strong>☞</strong> 一个网站，99%或者100%只有这两种请求方式。其他请求方式参见<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><strong>☞</strong> 无论是浏览器自主发起的请求，还是Ajax请求，都分为各种请求方式。</p> <h2 id="jquery中封装的ajax方法"><a href="#jquery中封装的ajax方法" class="header-anchor">#</a> jQuery中封装的Ajax方法</h2> <p>前文提到，浏览器使用内置对象 <code>XMLHttpRequest</code> 完成与服务器的通信。目前，jQuery对 <code>XMLHttpRequest</code> 对象的使用做了封装，提供了非常简单的使用方法。</p> <p>为了方便，我们先学习jQuery封装的方法。过两天，再学习原生的 <code>XMLHttpRequest</code> 对象。</p> <p>jQuery提供的能够实现ajax请求的方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 专门用于发送GET方式请求</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 专门用于发送POST请求</span>
$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 一个综合的发送Ajax请求的方法，使用频率最高</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 这里填ajax选项</span>
    url<span class="token operator">:</span> Ajax请求的url地址<span class="token punctuation">,</span> <span class="token comment">// 必填</span>
    type<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token comment">// 默认GET，可选POST</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 请求参数，可选</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ajax请求成功时的回调，可选</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>其他选项
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>$.ajax()方法的其他选项参见</strong><a href="https://www.jq22.com/chm/jquery/jQuery.ajax.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="获取服务器上的数据资源"><a href="#获取服务器上的数据资源" class="header-anchor">#</a> 获取服务器上的数据资源</h2> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <p>因为是获取服务器上的数据资源，所以要发送GET方式的请求，支持的方法有 <code>$.get()</code>和<code>$.ajax()</code>。</p> <p>下面演示获取一个服务器上的<strong>图书数据</strong></p> <p>（服务器是前端老师租赁的，我们直接使用即可，通过向下面的url地址发送请求可以获取到服务器上的书籍数据）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">;</span>

<span class="token comment">/******************* $.get() ******************/</span>

<span class="token comment">// 仅仅发送一个GET方式的请求</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送GET请求，并使用回调函数接收服务器响应的结果</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// res表示服务器响应的结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送GET请求，并传递一个请求参数（这里传递了id，表示只获取id为1的数据）</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/******************* $.ajax() ******************/</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> url<span class="token punctuation">,</span> <span class="token comment">//这项必填</span>
    type<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token comment">// 这里可以省略该项，因为type默认的值就是GET</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 传递id为1的参数表示只获取id为1的数据，可选</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// success表示ajax请求成功后的回调</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// res表示服务器返回的结果</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过语法，我们发现，<code>$.get()</code>和<code>$.ajax()</code>方法的参数是相通的。只是两个方法的语法不同而已。</p> <p><code>$.ajax()</code>相比 <code>$.get()</code> 更加强大，因为 <code>$.ajax()</code> 方法还允许填写<a href="https://www.jq22.com/chm/jquery/jQuery.ajax.html" target="_blank" rel="noopener noreferrer">更多选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <p>☞ 发送一个Ajax请求，获取服务器上的书籍数据，并将结果渲染到表格中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------  获取书籍列表信息，渲染到页面中 ---------------</span>
<span class="token keyword">function</span> <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发送ajax请求，获取所有的书籍信息</span>
  $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 渲染到页面中</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> listArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 向数组中添加单元</span>
        listArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;tr&gt;
          &lt;td&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td&gt;
          &lt;td&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>bookname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td&gt;
          &lt;td&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td&gt;
          &lt;td&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>publisher<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/td&gt;
          &lt;td&gt;
            &lt;a href=&quot;javascript:;&quot; class=&quot;del&quot;&gt;删除&lt;/a&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 循环结束，把数组中的所有tr拼接成字符串，并且放到tbody中</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>listArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="向服务器提交数据"><a href="#向服务器提交数据" class="header-anchor">#</a> 向服务器提交数据</h2> <h3 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h3> <p>因为是获取服务器上的数据资源，所以要发送POST方式的请求，支持的方法有 <code>$.post()</code>和<code>$.ajax()</code>。</p> <p>下面演示向服务器提交一本书籍的信息，让服务器帮我们保存起来。</p> <p>（服务器能够接收到通过Ajax提交的数据，并会和其他书籍一样保存起来，这是前端老师已经设计好的，我们只需要提交数据即可，只需了解服务器做了什么即可）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 注意下面的url和前面案例中的url不一样。</span>
<span class="token comment">// 一个url只能完成一个功能，比如获取书籍数据是一个url，添加书籍是另一个url</span>
<span class="token keyword">var</span> addUrl <span class="token operator">=</span> <span class="token string">'http://www.liulongbin.top:3006/api/addbook'</span><span class="token punctuation">;</span>

<span class="token comment">/******************* $.post() ******************/</span>

<span class="token comment">// 仅仅发送一个POST方式的请求，对于本例，仅仅发送一个POST请求没有意义</span>
$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>addUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送POST请求，并提交一本书的信息，并使用回调函数接收服务器响应的结果</span>
<span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token punctuation">{</span> 
    bookname<span class="token operator">:</span> <span class="token string">'遮天'</span><span class="token punctuation">,</span> 
    author<span class="token operator">:</span> <span class="token string">'辰东'</span><span class="token punctuation">,</span> 
    publiser<span class="token operator">:</span> <span class="token string">'仙侠出版社'</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>addUrl<span class="token punctuation">,</span> body<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// res表示服务器响应的结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/******************* $.ajax() ******************/</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> addUrl<span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token comment">// POST请求，所以这里必须是POST</span>
    data<span class="token operator">:</span> body<span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// res表示服务器返回的结果</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="案例-2"><a href="#案例-2" class="header-anchor">#</a> 案例</h3> <p>☞ 通过页面的输入框和按钮，完成添加书籍</p> <p>HTML代码略。</p> <ul><li>给 “添加” 按钮，注册单击事件</li> <li>获取输入框的值</li> <li>判断值是否为空</li> <li>发送ajax请求，提交数据给服务器，完成添加</li> <li>添加成功之后，重新渲染页面，并且清空输入框的值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------------- 添加书籍 ---------------------</span>
<span class="token comment">// 1. 给“添加”按钮注册单击事件</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btnAdd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2. 获取输入框的值（三个值）</span>
    <span class="token keyword">var</span> bookname <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#iptBookname'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> author <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#iptAuthor'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> publisher <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#iptPublisher'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 最好，判断一下，如果上述三个值，有空的，则不允许添加</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bookname <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span> author <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span> publisher <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'必填项不能为空'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 3. 按照接口文档，调用接口，完成添加</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
        bookname<span class="token operator">:</span> bookname<span class="token punctuation">,</span>
        author<span class="token operator">:</span> author<span class="token punctuation">,</span>
        publisher<span class="token operator">:</span> publisher
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/addbook'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 4. 添加成功，调用getData函数，重新渲染页面；另外，清空输入框的值</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无论添加成功还是失败，给出一个提示</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">201</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.form-control'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="接口及接口文档"><a href="#接口及接口文档" class="header-anchor">#</a> 接口及接口文档</h2> <h3 id="概念及说明"><a href="#概念及说明" class="header-anchor">#</a> 概念及说明</h3> <p>前面我们使用的 url，叫做数据接口，或者简称为接口。</p> <p>接口是服务器提供的一个url地址，通过这个url地址，我们可以操作服务器上的资源。</p> <p>通过Ajax技术向一个接口发送请求，也叫做调用接口。</p> <p>课程中所用到的接口文档：https://www.showdoc.com.cn/ajaxapi?page_id=3753323218792173 <strong>建议大家把它放到浏览器收藏夹</strong>。</p> <ul><li>接口是谁设计的呢
<ul><li><strong>后端</strong>同学设计的（学java的、学php的同学、.....）</li> <li>后端同学设计完接口之后，会提供一个接口文档给我们</li></ul></li> <li>一个好的接口文档，至少需要包含下面几项内容
<ul><li>接口说明（通过接口说明，大致了解到接口是干什么用的）</li> <li>接口的url（发送ajax请求，必要的条件）</li> <li>接口请求方式（发送ajax请求，必要的条件）</li> <li>请求参数（参数名称、数据类型、是否必填、参数说明等）</li> <li>响应格式</li> <li>响应示例</li></ul></li></ul> <h3 id="案例-3"><a href="#案例-3" class="header-anchor">#</a> 案例</h3> <p>首先，根据接口文档，我们了解到，想要删除一本书，必要的条件是传递id参数，所以，方便起见，在循环渲染书籍的时候，给每个删除超链接加入自定义属性 <code>data-id=&quot;${item.id}&quot;</code></p> <ul><li>事件委托方案，给&quot;删除&quot;注册单击事件</li> <li>询问是否要删除</li> <li>获取当前这本书的id
<ul><li>渲染数据的时候，给a标签，添加自定义属性data-id，值就是当前书籍的id</li> <li>单击事件中，通过<code>$(this).data('id')</code>可以获取属性<code>data-id</code>的值</li></ul></li> <li><code>按照接口文档</code>，发送ajax请求，删除书籍</li> <li>删除成功，重新渲染所有数据
<ul><li>删除成功之后，调用<code>getData()</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------------- 删除书籍 ---------------------</span>
<span class="token comment">// 1. 给 “删除” 超链接，注册单击事件</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'.del'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// alert(12);</span>
  <span class="token comment">// 2. 对于删除这种敏感操作，询问是否要删除？</span>
  <span class="token comment">// var a = confirm('你确定不要我了吗？你好狠？');</span>
  <span class="token comment">// console.log(a); // 用户点击了取消，a就是false；用户点击了确定，a就是true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'你确定不要我了吗？你好狠？'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 3. 按照接口要求发送ajax请求，实现删除</span>
  <span class="token comment">// 获取事件源（a超链接）的自定义属性</span>
  <span class="token comment">// var id = $(this).attr('data-id');</span>
  <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(id);</span>
  <span class="token comment">// return;</span>
  $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/delbook'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(res);</span>
    <span class="token comment">// 提示一下</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无论成功，还是失败，都提示一下</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 删除成功，重新渲染页面</span>
      <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="network工具"><a href="#network工具" class="header-anchor">#</a> network工具</h2> <ul><li><p>network工具使用</p> <ul><li>All   --  查看所有请求</li> <li>XHR -- 查看Ajax请求</li> <li>JS -- 查看请求了哪些JS文件</li> <li>CSS -- 查看请求了哪些CSS文件</li> <li>Img  -- 查看请求了哪些图片</li> <li>Media -- 查看请求了哪些音频、视频等</li> <li>Font -- 查看请求了哪些字体文件</li> <li>Doc -- document，查看请求了哪些html文件</li></ul></li></ul> <blockquote><p>如果报错 xxxx (Too Many Requests)，说明请求的太频繁了，过几秒再请求就好了</p></blockquote> <h2 id="聊天机器人案例"><a href="#聊天机器人案例" class="header-anchor">#</a> 聊天机器人案例</h2> <h3 id="效果展示"><a href="#效果展示" class="header-anchor">#</a> 效果展示</h3> <h3 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h3> <ul><li><p>聊天区是一个 ul&gt;li 的列表形式，ul 的 id 为 <code>talk_list</code></p></li> <li><p>我们自己说的内容，用一个 <code>li</code> 标签展示，<code>li</code>的类名为 <code>right_word</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right_word<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img/person02.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>约吗？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>机器人的回复，也是用一个 <code>li</code>展示的，类名为 <code>left_word</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left_word<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img/person01.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>嗨，最近想我没有？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>滚动条自动出现，并定位到底部的效果，是通过 <code>./js/scroll.js</code> 里面的 <code>resetui()</code> 方法实现的。直接拿来使用即可。</p></li> <li><p>语音播放，是因为页面内置了一个隐藏的 <code>audio</code> 标签，并且该标签具有 <code>autoplay</code> 属性。我们只需要设置它的 <code>src</code> 属性为一个音频地址即可自动播放</p></li> <li><p>先注册“发送”按钮的单击事件，最后按回车的时候，触发按钮的单击事件，即可实现 “按回车发送消息” 效果。</p></li> <li><p>写代码前，想好步骤，先做什么，做完之后再做什么。不要抄老师的代码。</p></li></ul> <h3 id="参考代码"><a href="#参考代码" class="header-anchor">#</a> 参考代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 自己的JS</span>
<span class="token comment">// 1. 点击 发送 按钮之后，把自己说的话渲染到页面中</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btnSend'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取自己说的内容（输入框的值）</span>
    <span class="token keyword">var</span> myWord <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 把自己说的话，渲染到页面中（弄一个li标签，放到ul中）</span>
    <span class="token keyword">var</span> my_li <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class=&quot;right_word&quot;&gt;
    	&lt;img src=&quot;img/person02.png&quot; /&gt; &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myWord<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;
    &lt;/li&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'ul#talk_list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>my_li<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 清空输入框</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置滚动条到底部</span>
    <span class="token function">resetui</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 把自己说的话渲染完毕，然后才能获取机器人的回复</span>
    <span class="token function">getRobotWord</span><span class="token punctuation">(</span>myWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 发送Ajax请求，获取机器人的回复，并且也渲染到页面中</span>
<span class="token keyword">function</span> <span class="token function">getRobotWord</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/robot'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> spoken<span class="token operator">:</span> a <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(res)</span>
        <span class="token comment">// 获取到机器人的回复</span>
        <span class="token keyword">var</span> robotWord <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>info<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
        <span class="token comment">// 渲染到页面中</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class=&quot;left_word&quot;&gt;
&lt;img src=&quot;img/person01.png&quot; /&gt; &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>robotWord<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;
&lt;/li&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">'ul#talk_list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 重置滚动条到底部</span>
        <span class="token function">resetui</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 当获取到机器人的回复之后，才能把机器人的回复转成语音</span>
        <span class="token function">toVoice</span><span class="token punctuation">(</span>robotWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3. 发送Ajax请求，把文字转语音</span>
<span class="token keyword">function</span> <span class="token function">toVoice</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/synthesize'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> b <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(res);</span>
            <span class="token comment">// 设置音频标签的src属性</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#voice'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>voiceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4. 优化。。。。</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取键盘的keyCode值</span>
    <span class="token keyword">var</span> keyCode <span class="token operator">=</span> e<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
    <span class="token comment">// console.log(keyCode);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 表示按了回车键</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btnSend'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h1 id="第二天"><a href="#第二天" class="header-anchor">#</a> 第二天</h1> <h2 id="同步请求和异步请求"><a href="#同步请求和异步请求" class="header-anchor">#</a> 同步请求和异步请求</h2> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>JS代码分为同步代码和异步代码。目前，我们学习过的异步代码有：</p> <ul><li>事件</li> <li>定时器</li> <li>Ajax请求</li></ul> <p><strong>除此之外，其他所有代码都是同步代码</strong>。</p> <p>为什么要把代码分为同步和异步两类呢？因为它们的执行顺序有很大差别。</p> <p>假设有几段代码，既有同步代码，又有异步代码，他们的执行顺序如下：</p> <ol><li>优先执行同步代码</li> <li>前一行<strong>同步代码</strong>没有执行完，后面的代码只能等待，这就是“阻塞”效果。</li> <li>遇到<strong>异步代码</strong>，去排队等待</li> <li>所有的同步代码执行完，才去检查是否有异步代码</li> <li>如果有异步代码，按顺序执行，但不会有“阻塞”效果。
<ol><li>异步任务执行前，一般都会提前绑定一个回调函数</li> <li>当前的异步任务执行完毕，就会调用提前帮的回调函数</li></ol></li></ol> <p><img src="https://gitee.com/ye-xingchen/tuchuang/raw/master/img/image-20210107221412656.png" alt="image-2021007221412656"></p> <h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <p>☞ 思考，下面的代码执行顺序是怎样的？</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span>
</code></pre></div><p>☞ 思考，下面的代码执行顺序是怎样的？</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/news'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="同步的ajax请求-了解"><a href="#同步的ajax请求-了解" class="header-anchor">#</a> 同步的Ajax请求（了解）</h3> <p>目前，我们发送的Ajax请求，都是异步请求。但也可以通过修改选项设置Ajax同步请求。下面是一个例子。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    async<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 默认true，如果改为false，表示发送 同步 的Ajax请求</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>同步的Ajax请求了解即可，因为它会阻塞代码的运行，开发中基本不用。</p></blockquote> <h2 id="常用请求方式的区别"><a href="#常用请求方式的区别" class="header-anchor">#</a> 常用请求方式的区别</h2> <ul><li>GET
<ul><li>GET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据。</li> <li><strong>通俗的讲，获取数据应该使用GET方式的请求。</strong></li></ul></li> <li>POST
<ul><li>POST方法用于将实体提交到指定的资源，通常导致在服务器上的状态变化或副作用。</li> <li><strong>添加、修改都可以使用POST请求，因为此类操作都会改变服务器上的资源</strong></li></ul></li> <li>PUT
<ul><li>PUT方法用请求有效载荷替换目标资源的所有当前表示。</li> <li><strong>修改操作可以选择使用PUT方式</strong></li></ul></li> <li>DELETE
<ul><li>DELETE方法删除指定的资源。</li> <li><strong>删除操作可以使用DELETE方式</strong></li></ul></li></ul> <blockquote><p>具体使用什么请求方式，<strong>必须参照接口文档</strong>。</p></blockquote> <h2 id="深入理解jquery方法的请求参数"><a href="#深入理解jquery方法的请求参数" class="header-anchor">#</a> 深入理解jQuery方法的请求参数</h2> <p>无论使用 <code>$.get()</code> 还是 <code>$.post()</code> 还是 <code>$.ajax()</code> 方法，都可以设置请求参数，即 <code>data</code>。示例如下</p> <ul><li>$.get('url',  <code>data</code>, function (res) { ... })</li> <li>$.post('url',  <code>data</code>, function (res) { ... })</li> <li>$.ajax({ <code>data</code>: { id: 1 } })</li></ul> <p>实际上，在使用jQuery的上述三个方法的前提下，我们不但可以使用<strong>对象</strong>形式的参数，也能使用<strong>数组</strong>或者查询<strong>字符串</strong>，示例如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这里使用 $.ajax() 举例，另外两个方法同理</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 对象形式的写法</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bookname<span class="token operator">:</span> <span class="token string">'西游记'</span> <span class="token punctuation">}</span>
    
    <span class="token comment">// 数组形式的写法，注意，只能是这种写法</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'id'</span><span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'bookname'</span><span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token string">'西游记'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
       
    <span class="token comment">// 字符串写法，注意，这种类型的字符串，叫做查询字符串</span>
    data<span class="token operator">:</span> <span class="token string">'id=1&amp;bookname=西游记'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>无论我们填写的何种形式的参数，都会被jQuery转换成查询字符串形式传递到服务器，因为底层支持查询字符串形式的参数，而不支持字面量对象和数组形式。</strong></p> <p>这一特点，可以通过network工具查看。</p> <blockquote><p>扩展：GET请求传递的叫做请求参数；POST请求提交的一般都叫做<strong>请求体</strong>。</p></blockquote> <h2 id="serialize和serializearray方法"><a href="#serialize和serializearray方法" class="header-anchor">#</a> serialize和serializeArray方法</h2> <p>☞ 思考一个问题，添加书籍的时候，是如何获取输入框的值的？</p> <p>答：一个一个获取的。</p> <p>☞ 思考，如果输入框特别多，而且还有下拉框，单选按钮组、复选按钮组，又该如何获取这些值呢？</p> <p>答：不知道（心里想肯定有办法，猜测和标题有关系。。。要不然不能讲）</p> <p>确实，可以使用jQuery提供的 <code>serialize()</code> 或者 <code>serializeArray()</code> 方法获取表单各项的值。</p> <p>语法：</p> <div class="language- extra-class"><pre class="language-text"><code>$('form').serialize();
$('form').serializeArray();
</code></pre></div><p>也就是说，使用 <code>serialize()</code> 或者 <code>serializeArray()</code> 方法是通过 表单(form) 调用的，所以必须在HTML页面中加入 <code>&lt;form&gt;...&lt;/form&gt;</code> 标签。如下所示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 把所有的框框、按钮都放这里面 --&gt;</span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookname<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nan<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span> <span class="token punctuation">/&gt;</span></span>男 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nv<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>北京<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>上海<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>接下来，就可以使用  <code>serialize()</code> 或者 <code>serializeArray()</code> 方法 获取全部的值了，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 监听表单的 submit 事件 （表单提交时触发）</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 一定阻止表单提交，否则页面会跳转；默认跳转到当前页面，感觉和刷新一样</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// 保证页面不会跳转，接下来使用 serialize 获取表单数据</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>小结：</p> <ul><li>在必须具有 <code>&lt;form&gt;...&lt;/form&gt;</code> 标签的前提下，才能使用 <code>serialize()</code> 或者 <code>serializeArray()</code> 方法</li> <li>各项表单元素（input、select、textarea）<strong>必须具备 <code>name</code> 属性</strong>。</li> <li>通过<code>serialize()</code> 得到的是查询字符串类型；通过 <code>serializeArray()</code>得到的是数组类型。结果都可以直接当做Ajax请求的参数。</li> <li>两个方法均<strong>不能</strong>获取 **禁用状态（disabled）**的输入框的值。</li> <li>两个方法均<strong>不能</strong>获取<strong>文件域</strong>（<code>&lt;input type=&quot;file&quot; /&gt;</code>）的值。</li> <li>两个方法都<strong>能</strong>获取<strong>隐藏域</strong>（<code>&lt;input type=&quot;hidden&quot; /&gt;</code>）的值。</li></ul> <h2 id="关于html表单的补充"><a href="#关于html表单的补充" class="header-anchor">#</a> 关于HTML表单的补充</h2> <p>一个表单可以分为三个部分组成：</p> <ul><li>表单标签（form）</li> <li>表单域（input、textarea、select）</li> <li>按钮</li></ul> <h3 id="form标签"><a href="#form标签" class="header-anchor">#</a> form标签</h3> <p>form标签的action属性表示提交地址，默认为空，表示提交到当前页面。</p> <p>还有 method、enctype、target 三个属性，了解即可。</p> <h3 id="表单域"><a href="#表单域" class="header-anchor">#</a> 表单域</h3> <p>常用表单域列举</p> <ul><li>单行文本域     <code>&lt;input type=&quot;text&quot; /&gt;</code></li> <li>密码框            <code>&lt;input type=&quot;password&quot; /&gt;</code></li> <li>单选按钮        <code>&lt;input type=&quot;radio&quot; /&gt;</code></li> <li>复选按钮        <code>&lt;input type=&quot;checkbox&quot; /&gt;</code></li> <li>隐藏域            <code>&lt;input type=&quot;hidden&quot; /&gt;</code></li> <li>文件域            <code>&lt;input type=&quot;file&quot; /&gt;</code></li> <li>下拉选择框     <code>&lt;select&gt;&lt;option&gt;xxx&lt;/option&gt;&lt;/select&gt;</code></li> <li>多行文本框     <code>&lt;textarea&gt;&lt;/textarea&gt;</code></li></ul> <h3 id="按钮"><a href="#按钮" class="header-anchor">#</a> 按钮</h3> <ul><li>普通按钮（<strong>点击之后，默认不会发生任何事</strong>）
<ul><li><code>&lt;button type=&quot;button&quot;&gt;普通按钮1&lt;/button&gt;</code></li> <li><code>&lt;input type=&quot;button&quot; value=&quot;普通按钮2&quot; /&gt;</code></li></ul></li> <li>重置按钮（<strong>点击之后，默认会重置表单</strong>）
<ul><li><code>&lt;button type=&quot;reset&quot;&gt;重置按钮1&lt;/button&gt;</code></li> <li><code>&lt;input type=&quot;reset&quot; value=&quot;重置按钮2&quot; /&gt;</code></li></ul></li> <li>提交按钮（<strong>点击之后，默认会提交表单</strong>）
<ul><li><code>&lt;button&gt;提交按钮1&lt;/button&gt;</code></li> <li><code>&lt;button type=&quot;submit&quot;&gt;提交按钮2&lt;/button&gt;</code></li> <li><code>&lt;input type=&quot;submit&quot; value=&quot;提交按钮3&quot; /&gt;</code></li></ul></li></ul> <p><strong>☞ 问题1</strong>：如果JS代码中，注册了表单的提交事件（<code>$('form').on('submit', fun....)</code>），应该使用什么类型的按钮？</p> <p>答：使用 提交按钮。</p> <p><strong>☞ 问题2</strong>：使用serialize方法收集表单值的时候，能不能找到提交按钮，然后注册单击事件呢？</p> <p>答：也可以。可以找到form，注册submit事件；也可以找到提交按钮，注册click事件。建议找到form，使用submit事件。</p> <h2 id="模板引擎-art-template"><a href="#模板引擎-art-template" class="header-anchor">#</a> 模板引擎 art-template</h2> <h3 id="案例中渲染数据的问题"><a href="#案例中渲染数据的问题" class="header-anchor">#</a> 案例中渲染数据的问题</h3> <ul><li>性能问题，不断的拼接字符串，性能低下</li> <li>代码结构比较混乱，JS代码和HTML代码混合到一起了</li></ul> <blockquote><p>解决办法：模板引擎</p></blockquote> <h3 id="模板引擎简介"><a href="#模板引擎简介" class="header-anchor">#</a> 模板引擎简介</h3> <p>模板引擎，可以把数据和准备好的HTML模板组合到一起，得到最终HTML。</p> <p><img src="https://gitee.com/ye-xingchen/tuchuang/raw/master/img/image-20200704141003708.png" alt="image-2020070414003708"></p> <p>使用模板引擎的好处：</p> <ul><li>①减少了字符串的拼接操作</li> <li>②使代码结构更清晰</li> <li>③使代码更易于阅读与维护</li> <li>.....</li></ul> <h3 id="尝试编写一个实现模板引擎功能的函数"><a href="#尝试编写一个实现模板引擎功能的函数" class="header-anchor">#</a> 尝试编写一个实现模板引擎功能的函数</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 
        定义模板 
            使用script标签的目的是，不让模板显示到页面
            加 type=&quot;text/html&quot; 是为了不报错
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">/**
         * 实现模板引擎的函数
         * @param {string} id 模板id
         * @param {object} data 数据
         * @returns {string} 模板和数据组合好的结果 
         */</span>
        <span class="token keyword">function</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                html <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{{'</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">'}}'</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 调用 template 函数，监测效果</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'悯农'</span><span class="token punctuation">,</span>
            content<span class="token operator">:</span> <span class="token string">'锄禾日当午'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="art-template模板引擎"><a href="#art-template模板引擎" class="header-anchor">#</a> art-template模板引擎</h3> <p>市面上，目前有很多模板引擎（JS插件）。</p> <p>我们上课选择的是art-template这个插件，因为这款模板引擎执行速度是非常快的。</p> <p>官网：http://aui.github.io/art-template/zh-cn/docs/index.html</p> <h3 id="art-template基本使用方法"><a href="#art-template基本使用方法" class="header-anchor">#</a> art-template基本使用方法</h3> <p>模板引擎可以把HTML模板和数据组合到一起。</p> <p>使用方法和使用自己编写的模板引擎函数一样简单。</p> <p>但art-template比我们自己封装函数功能更加强大，性能更好。</p> <p>步骤：</p> <ul><li>加载 <strong>template-web.js</strong></li> <li>准备<strong>模板</strong> <ul><li>建议使用script标签，因为script标签里面的内容，不会显示到页面中</li> <li>给script标签加 type=&quot;text/html&quot;，告诉浏览器，这段代码不是JS，这样不会报错</li> <li>给script标签加 id属性，后面调用 template 函数的时候会用</li></ul></li> <li>准备<strong>数据</strong> <ul><li>建议用JS<strong>对象</strong></li></ul></li> <li>调用template函数，完成模板和数据的组合
<ul><li>参数1：模板id</li> <li>参数2：数据</li> <li>返回值：组合好的结果</li></ul></li> <li>最后，按需使用这个结果即可。</li></ul> <p>参考代码如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/template-web.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 
模板引擎可以把 HTML模板结构 和 数据 进行组合
测试的话，需要
	- 模板结构
	- 数据
--&gt;</span>

<span class="token comment">&lt;!-- 定义一个HTML模板，模板不应该直接显示 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl-shi<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>author<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 正常情况下，数据应该是ajax请求，服务器返回的数据</span>
    <span class="token comment">// 这里为了测试，就不发送ajax请求了，自己模拟一点数据即可</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'锦瑟'</span><span class="token punctuation">,</span>
        author<span class="token operator">:</span> <span class="token string">'李商隐'</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">'锦瑟无端五十弦，一弦一柱思华年。'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// art-template插件给我们提供了一个函数 template，调用这个函数，就可以把HTML结构和数据组合到一起</span>

    <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'tpl-shi'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="模板语法"><a href="#模板语法" class="header-anchor">#</a> 模板语法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//模板语法，即只能在模板中使用的形如 `{{xxx}}` 这样的语法。</span>

<span class="token comment">//art-template提供了非常强大的模板语法，能够适应绝大多数开发场景。</span>
</code></pre></div><p>准备的数据如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'静夜思'</span><span class="token punctuation">,</span>
    author<span class="token operator">:</span> <span class="token string">'李白'</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">'窗前明月光，疑是地上霜'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
    hobby<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'吃饭'</span><span class="token punctuation">,</span> <span class="token string">'睡觉'</span><span class="token punctuation">,</span> <span class="token string">'打豆豆'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    str<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    str2<span class="token operator">:</span> <span class="token string">'apple,pear,orange,banana'</span><span class="token punctuation">,</span>
    str3<span class="token operator">:</span> <span class="token string">'&lt;b&gt;nice to meet you&lt;/b&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>模板中可以使用的语法如下：</p> <ul><li><p>直接输出值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//`{{title}}`</span>
</code></pre></div></li> <li><p>原样输出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//`{{@str3}}`  加入@，会显示加粗的效果；不加@，页面中会直接显示标签</span>
</code></pre></div></li> <li><p>条件判断</p> <div class="language-html extra-class"><pre class="language-html"><code>{{if age &gt;= 18}}
成年人
{{else}}
未成年
{{/if}}
</code></pre></div></li> <li><p>循环（遍历）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- item 表示数组的值 --&gt;</span>
<span class="token comment">&lt;!-- index 表示数组的下标，如果用不上，index可以不写 --&gt;</span>
{{each hobby item index}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{index}}  --   {{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
{{/each}}
</code></pre></div></li> <li><p>模板中可以使用JS内置方法</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 调用toUpperCase() 把要输出的hello变为大写形式 --&gt;</span>
{{str.toUpperCase()}}

<span class="token comment">&lt;!-- str2是一个字符串，调用split方法，把字符串变为数组，然后使用each遍历数组 --&gt;</span>
{{each   str2.split(',')   val}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{val}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
{{/each}}
</code></pre></div></li> <li><p>模板中使用过滤器</p> <div class="language-html extra-class"><pre class="language-html"><code>{{str|过滤器名}}
比如：
{{str|ucfirst}}
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JS代码中，需要在调用 template 函数之前，准备ucfirst这个过滤器函数</span>
template<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>imports<span class="token punctuation">.</span><span class="token function-variable function">ucfirst</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数的形参str是原来准备要输出的值</span>
    <span class="token comment">// return，返回值是最终要输出到页面中的值</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="新闻列表案例"><a href="#新闻列表案例" class="header-anchor">#</a> 新闻列表案例</h2> <ul><li>使用Ajax技术获取全部的新闻列表数据。这样<strong>数据</strong>就有了。</li> <li>设置模板，取一篇新闻（所在的div）当做<strong>模板</strong>。</li> <li>调用 <code>template(模板id, 数据)</code> 函数，并将结果放到页面（<code>$('#news-list')</code>）中。</li> <li>使用 <strong>模板语法</strong> 处理模板。</li></ul> <p>JS代码参考：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 自定义函数处理时间日期</span>
template<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>imports<span class="token punctuation">.</span><span class="token function-variable function">abc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// console.log(t) // 形参，就是原来要输出的时间</span>
  <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> m <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> d <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> y <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> m <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 发送Ajax请求，获取全部的新闻数据</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/news'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(res)</span>
    <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'tpl-news'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 把模板和数据组合好的结果，放到 div#news-list 中</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#news-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>HTML模板参考：（<strong>图片在服务器上，所以要在图片地址前加根路径</strong>）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl-news<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token punctuation">{</span><span class="token punctuation">{</span>each data item index<span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;news-item&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;thumb&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://www.liulongbin.top:3006{{item.img}}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;right-box&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tags&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>each item<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> val<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>val<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>source<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>time<span class="token operator">|</span>abc<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>评论数：<span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>cmtcount<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="第三天"><a href="#第三天" class="header-anchor">#</a> 第三天</h1> <h2 id="xmlhttprequest对象简介"><a href="#xmlhttprequest对象简介" class="header-anchor">#</a> XMLHttpRequest对象简介</h2> <h3 id="纲要"><a href="#纲要" class="header-anchor">#</a> 纲要</h3> <p><code>XMLHttpRequest</code> 是一个内建的浏览器对象，Ajax技术的核心就是<code>XMLHttpRequest</code>  对象。</p> <p>jQuery中的 <code>$.ajax()</code> 、<code>$.get()</code>、<code>$.post()</code> 的底层实现，就是 <code>XMLHttpRequest</code> 。</p> <h3 id="历史"><a href="#历史" class="header-anchor">#</a> 历史</h3> <ul><li><p>XMLHttpRequest对象最初是 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/WHATWG" target="_blank" rel="noopener noreferrer">WHATWG(超文本应用程序技术工作组)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的一部分。</p></li> <li><p>2006年移至W3C。</p></li> <li><p>2008年2月，对XMLHttpRequest进行了扩展（如进度事件和跨域请求），也就是所谓的<a href="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/" target="_blank" rel="noopener noreferrer">XMLHttpRequest Level 2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，直至2011年底。</p></li> <li><p>2012年底，它移回了 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/WHATWG" target="_blank" rel="noopener noreferrer">WHATWG<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li></ul> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ul><li>XMLHttpRequest 简称 <strong>XHR</strong> 对象，是一个浏览器内置对象，目前，所有的浏览器均支持这个对象。</li> <li>它的作用是可以实现Ajax请求，Ajax技术的核心就是<code>XMLHttpRequest</code>  对象。</li></ul> <h2 id="实现ajax的get请求"><a href="#实现ajax的get请求" class="header-anchor">#</a> 实现Ajax的GET请求</h2> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h3> <ol><li>创建xhr对象。</li> <li>注册 xhr.onload 事件，当Ajax请求<strong>成功</strong>后，会触发onload函数。在onload函数中，接收响应结果。</li> <li>调用open方法，初始化一个请求，此方法用于配置请求方式和url。</li> <li>调用send方法，发送请求。</li></ol> <h3 id="基础代码"><a href="#基础代码" class="header-anchor">#</a> 基础代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 注册 xhr.onload 事件，当Ajax请求**成功**后，会触发onload函数。在onload函数中，接收响应结果。</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 xhr.response 接收响应结果</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 调用open方法，设置请求方式及请求的url地址</span>
<span class="token comment">// xhr.open('GET', 'http://www.liulongbin.top:3006/api/getbooks');</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. 最后，调用send方法，发送这次ajax请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="请求参数"><a href="#请求参数" class="header-anchor">#</a> 请求参数</h3> <p><strong>重要：如果传递请求参数，请求参数要以查询字符串形式拼接到url后面。</strong></p> <p><strong>形如：<code>url?id=1&amp;bookname=西游记</code></strong></p> <h3 id="其他说明"><a href="#其他说明" class="header-anchor">#</a> 其他说明</h3> <table><thead><tr><th>API</th> <th>兼容性</th></tr></thead> <tbody><tr><td>XMLHttpRequest</td> <td>IE7+ 支持</td></tr> <tr><td>open</td> <td>所有浏览器均支持</td></tr> <tr><td>send</td> <td>所有浏览器均支持</td></tr> <tr><td>onload</td> <td>Level 2 新增，IE9+ 支持</td></tr> <tr><td>response</td> <td>Level 2 新增，IE10+ 支持</td></tr></tbody></table> <p>了解 <code>XMLHttpRequest</code> 对象所有API的兼容性，点击<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <blockquote><p>稍后，我们再讨论兼容所有浏览器的写法。</p></blockquote> <h2 id="实现ajax的post请求"><a href="#实现ajax的post请求" class="header-anchor">#</a> 实现Ajax的POST请求</h2> <h3 id="步骤-2"><a href="#步骤-2" class="header-anchor">#</a> 步骤</h3> <p>（比GET请求多了一行代码）</p> <ol><li>创建xhr对象。</li> <li>注册 xhr.onload 事件，当Ajax请求<strong>成功</strong>后，会触发onload函数。在onload函数中，接收响应结果。</li> <li>调用open方法，初始化一个请求，此方法用于配置请求方式和url。</li> <li><strong>调用setRequestHeader方法，设置请求头。</strong></li> <li>调用send方法，发送请求。</li></ol> <h3 id="基础代码-2"><a href="#基础代码-2" class="header-anchor">#</a> 基础代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 注册 xhr.onload 事件，当Ajax请求**成功**后，会触发onload函数。在onload函数中，接收响应结果。</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 xhr.response 接收响应结果</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 调用open方法，设置请求方式及请求的url地址</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/addbook'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. 调用setRequestHeader，设置请求头，目的是告知服务器以何种方式解析请求体</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. 最后，调用send方法，发送这次ajax请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'bookname=西游记&amp;author=唐僧&amp;publisher=大唐出版社'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="请求体"><a href="#请求体" class="header-anchor">#</a> 请求体</h3> <p><strong>重申一下，POST请求的参数，称之为请求体。</strong></p> <p>和GET请求一样，请求体也要写成查询字符串格式，不同之处是，请求体做为send方法的参数发送。</p> <h3 id="其他说明-2"><a href="#其他说明-2" class="header-anchor">#</a> 其他说明</h3> <table><thead><tr><th>API</th> <th>兼容性</th></tr></thead> <tbody><tr><td>setRequestHeader</td> <td>所有浏览器均支持</td></tr></tbody></table> <p><code>setRequestHeader</code> 方法用于设置请求头，格式如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'名称'</span><span class="token punctuation">,</span> <span class="token string">'值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>设置的请求头可以在 network 面板 &gt; Headers &gt; Request Headers 中查看。</li> <li>大部分请求头由浏览器管理，不允许我们修改。所以我们无需关心。</li> <li>一旦设置了请求头，就无法撤销了。</li></ul> <h3 id="content-type"><a href="#content-type" class="header-anchor">#</a> Content-Type</h3> <ul><li>这里设置的 <code>Content-Type</code> ，作用是告知服务器，浏览器提交的数据是何种类型的。
<ul><li>值为：application/x-www-form-urlencoded（需要自己指定） ，表示客户端提交的是<strong>查询字符串</strong>。</li> <li>值为：application/json（需要自己指定） ，表示客户端提交的是 <strong>JSON 字符串</strong>。</li> <li>值为：multipart/form-data（xhr对象会自动设置），表示客户端提交的是 <strong>FormData 对象</strong>。</li></ul></li></ul> <h2 id="对请求参数进行编码"><a href="#对请求参数进行编码" class="header-anchor">#</a> 对请求参数进行编码</h2> <h3 id="什么是url编码"><a href="#什么是url编码" class="header-anchor">#</a> 什么是URL编码？</h3> <ul><li>把中文和部分特殊符号转成 <strong>URL的标准格式</strong> ，这就是url编码</li> <li>如，把“中文” 进行url编码后得到 “%E4%B8%AD%E6%96%87”</li></ul> <h3 id="为什么要对请求参数进行编码"><a href="#为什么要对请求参数进行编码" class="header-anchor">#</a> 为什么要对请求参数进行编码</h3> <ul><li>RFC文档规定，只有字母和数字[0-9a-zA-Z]、一些特殊符号“<strong>$-_.+!*’(),</strong>”[不包括双引号]、以及某些保留字，才可以不经过编码直接用于URL。</li> <li>对于Unicode字符，RFC文档建议使用utf-8对其进行编码得到相应的字节，然后对每个字节执行百分号编码，也就是所谓的 <strong>URL编码</strong>。</li></ul> <h3 id="编码能够解决的问题"><a href="#编码能够解决的问题" class="header-anchor">#</a> 编码能够解决的问题</h3> <ul><li>乱码问题（浏览器使用utf-8、服务器使用其他编码，传输数据的时候，就会乱码）</li> <li>提交的内容有特殊符号问题，比如添加一本书，书名是 “红&amp;黑”</li></ul> <h3 id="如何进行url编码"><a href="#如何进行url编码" class="header-anchor">#</a> 如何进行URL编码</h3> <p>JS提供了内置编码解码函数</p> <ul><li>编码：encodeURIComponent('西游记')</li> <li>解码：decodeURIComponent(&quot;%E8%A5%BF%E6%B8%B8%E8%AE%B0&quot;);</li></ul> <blockquote><p>具体查看手册：https://www.w3school.com.cn/jsref/jsref_obj_global.asp</p></blockquote> <h3 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h3> <p>无论是GET请求还是POST请求，向服务器传递参数的时候，必须要对参数进行编码。这里的参数包括参数名和值。</p> <p>比如，参数为 <code>shu ming=红&amp;黑</code></p> <ul><li>参数名中有空格，需要编码；</li> <li>值有中文，且有歧义，需要编码；</li></ul> <h2 id="readystate属性"><a href="#readystate属性" class="header-anchor">#</a> readyState属性</h2> <p>Ajax从创建xhr对象开始，一直到完全接收服务器返回的结果为止；我们可以把整个请求响应过程划分为5个阶段。<strong>并且可以使用 xhr.readyState 属性检测当前请求执行到哪个阶段了。</strong></p> <p><strong>readyState属性值为一个数字</strong>，不同的数字表示Ajax的不同状态。</p> <ul><li>如果状态值为0（xhr.readyState === 0），初始状态，表示xhr对象一定创建了。</li> <li>如果状态值为1（xhr.readyState === 1），表示open一定调用了</li> <li>如果状态值为2（xhr.readyState === 2），表示send一定调用了，并且已经接收到响应头。</li> <li>如果状态值为3（xhr.readyState === 3），表示正在接收服务器返回的数据（可能已接收完毕，也可能正在接收中，取决于数据量的大小）</li> <li><strong>如果状态值为<code>4</code>（<code>xhr.readyState === 4</code>），表示Ajax请求~响应过程完成</strong></li></ul> <p><img src="https://gitee.com/ye-xingchen/tuchuang/raw/master/img/image-20210111003705390.png" alt="image-20210111003705390"></p> <blockquote><p>值为0、1、2、3的时候，基本上不用关心。主要关心值为4的时候，因为这个时候表示Ajax请求~响应过程完成了，如果成功的结束了，则可以完全接收服务器响应的结果。</p></blockquote> <p>下面在创建xhr对象后和onload事件内部分别输出 xhr.readyState 可以分别得到 0 和 4。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ===&gt; 0</span>

<span class="token comment">// 2. 注册 xhr.onload 事件，当Ajax请求**成功**后，会触发onload函数。在onload函数中，接收响应结果。</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ===&gt; 4</span>
    <span class="token comment">// 使用 xhr.response 接收响应结果</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 调用open方法，设置请求方式及请求的url地址</span>
<span class="token comment">// xhr.open('GET', 'http://www.liulongbin.top:3006/api/getbooks');</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. 最后，调用send方法，发送这次ajax请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="onreadystatechange事件"><a href="#onreadystatechange事件" class="header-anchor">#</a> onreadystatechange事件</h2> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <p>onreadystatechange 翻译过来是 <strong>当Ajax的请求状态改变的时候</strong>。</p> <p>所以，它是配合上述的 readyState 使用的事件。</p> <p><strong>事件具体的触发时机如下</strong>：</p> <ul><li>readyState属性值改变的时候
<ul><li>0 --&gt; 1</li> <li>1 --&gt; 2</li> <li>2 --&gt; 3</li> <li>3 --&gt; 4</li></ul></li> <li>接收到的数据量改变的时候，此时 readyState 的值保持为3，但也会触发 onreadystatechange 事件（发生在分块接收大量数据的时候）</li></ul> <blockquote><p>所以，绑定的onreadystatechange事件，可能会触发多次。</p></blockquote> <h3 id="代替onload事件解决兼容问题"><a href="#代替onload事件解决兼容问题" class="header-anchor">#</a> 代替onload事件解决兼容问题</h3> <p>前文提到，onload有浏览器兼容问题，如果你的项目需要支持低版本的浏览器，那么可以使用 onreadystatechange事件代替onload事件。</p> <p>由于onreadystatechange事件可能会触发多次，所以需要在事件中加入判断，已保证准确的接收到响应结果。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IE6 创建对象 var xhr = new ActiveXObject('Microsoft.XMLHTTP');</span>

<span class="token comment">// 2. 使用onreadystatechange代替onload</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断Ajax请求是否完成</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 还要根据响应状态码判断，请求是否成功</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求失败'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 调用open方法，设置请求方式及请求的url地址</span>
<span class="token comment">// xhr.open('GET', 'http://www.liulongbin.top:3006/api/getbooks');</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. 最后，调用send方法，发送这次ajax请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>既然要解决兼容性问题，所以把 response 换成没有兼容问题的 responseText。区别是response可以接收任何类型的响应结果，而responseText只能接收文本类型的结果。</p></blockquote> <h2 id="封装ajax"><a href="#封装ajax" class="header-anchor">#</a> 封装Ajax</h2> <p>思路：</p> <ul><li><p>想好了，最终封装成什么样的 --- 封装成和 $.ajax 一样的（简略版）</p></li> <li><p>我们希望和调用jQuery的$.ajax方法一样，来调用自己封装的函数，形式如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假设我们封装了一个 ajax 函数，调用方式如下</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// res 表示服务器响应的结果</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>封装函数 ajax，参数只有一个，是对象形式，参照上面的代码</p></li> <li><p>函数体</p> <ul><li>基本的Ajax代码（基本的步骤写出来）</li> <li>判断GET和POST请求，分别写 open 和 send 方法</li> <li>处理请求参数，把对象形式的参数处理成查询字符串格式</li> <li>当ajax请求成功之后，调用success函数，把服务器响应的结果当做实参传给success。</li> <li>细节处理（默认GET方式、不区分大小写等等、响应结果是否转换成JS对象...）</li></ul></li></ul> <blockquote><p>封装，不可能封装的和jQuery那样强大；通过自己封装，我们能够体会到jQuery中的$.ajax()方法是怎么封装的。</p></blockquote> <p>参考代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
* 把字面量对象转换成查询字符串
* @param {object} obj 一个字面量对象
* @returns {string} 查询字符串
*/</span>
<span class="token keyword">function</span> <span class="token function">ObjectToQueryString</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
* 实现Ajax请求
* @param {object} option 对象形式的参数
* 	@param {string} option.type 请求方式
* 	@param {string} option.url 接口地址
* 	@param {object} option.data 请求参数
* 	@param {callback} option.success 成功后的回调
*/</span>
<span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 把请求方式统一转大写，为后面的判断做准备</span>
    <span class="token keyword">var</span> type <span class="token operator">=</span> option<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 调用上面的函数，把请求参数处理成查询字符串</span>
    <span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token function">ObjectToQueryString</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 写Ajax的基本步骤</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当响应成功后，把JSON格式的结果转换为JS对象</span>
        <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 把结果，传递给 success 回调函数</span>
        option<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 判断是GET还是POST请求方式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> option<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> option<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <h3 id="json在ajax中的作用"><a href="#json在ajax中的作用" class="header-anchor">#</a> JSON在Ajax中的作用</h3> <p>JSON在Ajax请求的过程中，作用就是作为数据的载体。</p> <p>比如中国人和英国人交流，双方的语言不通，所以必须找一个翻译。</p> <p>服务端使用的编程语言可能是java、php等，前端使用的编程语言是JavaScript，双方的数据格式可能不一样，所以在交互数据的时候，得转换成双方都能识别的格式，比如JSON格式。</p> <blockquote><p>古老的XML也具有和JSON相同的作用，现在基本不用了。</p></blockquote> <h3 id="编写json"><a href="#编写json" class="header-anchor">#</a> 编写JSON</h3> <p>JSON长得和JS数据差不多，但JSON是字符串类型。比如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JS 对象</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'zs'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// JSON 字符串</span>
<span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token string">'{ &quot;id&quot;: 1, &quot;name&quot;: &quot;zs&quot; }'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>很少直接在JS代码中写JSON。一般都是在JSON文件(<code>xxx.json</code>)中写JSON。</p> <p>Ajax课程中，接口响应的结果都是JSON字符串格式。</p></blockquote> <p><strong>编写JSON的具体要求</strong>：</p> <ul><li>不允许出现 undefined</li> <li>不允许写注释</li> <li>不能有函数</li> <li>无论是属性名还是字符串类型的值，都必须加<strong>双</strong>引号。（单引号都不行）</li> <li>JSON中可以包括的数据类型
<ul><li>数字</li> <li>字符串（必须加双引号）</li> <li>布尔</li> <li>null</li> <li>数组</li> <li>对象</li></ul></li> <li>一个完整的JSON字符串，前后的括号必须对应，且不能有其他内容。</li></ul> <h3 id="json和js数据转换"><a href="#json和js数据转换" class="header-anchor">#</a> JSON和JS数据转换</h3> <p><strong>JSON ----&gt; JS</strong></p> <ul><li>var JS数据 = JSON.parse(JSON字符串);</li> <li>这个过程叫做 反序列化</li></ul> <p><strong>JS ----&gt; JSON</strong></p> <ul><li>var JSON字符串 = JSON.stringify(JS数据);</li> <li>这个过程叫做 序列化</li></ul> <p>请思考下面的转换：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ------------------------- 转成JSON格式 --------------------</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 这里有一个注释</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 思考，答案是怎样的呢？</span>

<span class="token comment">// ---------------------- JSON转成JS数据 ---------------------</span>
<span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token string">'true123[&quot;apple&quot;, &quot;orange&quot;]'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> aa <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，因为把三部分JSON格式的字符串放到一起了</span>

</code></pre></div><h2 id="设置http请求时限"><a href="#设置http请求时限" class="header-anchor">#</a> 设置HTTP请求时限</h2> <ul><li>timeout -- Level 2 新增，IE8+支持，用于设置请求的超时时间，单位是毫秒</li> <li>ontimeout -- Level 2 新增，IE10+支持，如果请求超时了，会触发 ontimeout 事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 单位是毫秒</span>
<span class="token comment">// 当请求超时之后，会触发下面的函数</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请求超时，请刷新重试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="formdata对象"><a href="#formdata对象" class="header-anchor">#</a> FormData对象</h2> <h3 id="介绍-2"><a href="#介绍-2" class="header-anchor">#</a> 介绍</h3> <p>Form是表单，Data是数据。猜测，它和表单数据有关系。</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer">FormData<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是h5出现之后，新增的一个对象。用于管理表单数据。IE10+支持。</p> <p>可以这样理解，FormData的作用和 jQuery中的 serialize() 作用一样，用于快速收集表单数据，并且可以将结果直接提交给接口。</p> <p>创建的FormData对象，可直接通过 <code>xhr.send(FormData对象)</code> 提交给服务器的接口。</p> <h3 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">[</span>form<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数是表单的DOM对象，可选</span>
</code></pre></div><p><strong>FormData的API</strong>：（除了append方法IE10支持外，其他方法IE均<strong>不支持</strong>）</p> <ul><li><code>append('key', 'value');</code>  -- 向对象中<strong>追加</strong>数据</li> <li><code>set('key', 'value');</code> -- 修改对象中的数据</li> <li>delete('key'); -- 从对象中删除数据</li> <li>get('key') -- 获取对象中的数据</li> <li>getAll('key') -- 获取指定key的全部数据</li> <li>forEach() -- 遍历对象中的数据</li> <li>....</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nv<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用FormData收集表单数据</span>
        <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入表单的DOM对象</span>

        <span class="token comment">// append向fd对象中追加数据</span>
        fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 追加一个age</span>
        fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 追加一个username</span>

        <span class="token comment">// set修改fd中的数据</span>
        fd<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'sex'</span><span class="token punctuation">,</span> <span class="token string">'yao'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 修改sex</span>

        <span class="token comment">// get用于获取一个值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  fd<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取到一个username的值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  fd<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取到全部username的值</span>

        <span class="token comment">// console.log(fd); // 输出fd没用，看不到数据</span>
        <span class="token comment">// 只能通过forEach来检查对象中有哪些数据</span>
        fd<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(key, val);</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="使用formdata的注意事项-必看"><a href="#使用formdata的注意事项-必看" class="header-anchor">#</a> 使用FormData的注意事项（必看）</h3> <ul><li>使用FormData，要求<strong>表单各项必须有name属性</strong>，因为FormData也是根据表单各项的name属性获取值的</li> <li>实例化 FormData对象，传入表单的<strong>DOM对象</strong>，可以快速收集到表单各项值。</li> <li><strong>可以收集文件信息</strong>，这是和  serialize 不一样的。<strong>可以完成文件上传</strong>。</li> <li>如果要<strong>检查FormData中有哪些值，需要使用forEach遍历</strong>。</li> <li>如果需要动态添加或修改FormData中的值，可以调用 FormData的append或set方法。</li></ul> <h3 id="formdata配合xhr对象"><a href="#formdata配合xhr对象" class="header-anchor">#</a> FormData配合XHR对象</h3> <p>FormData本就是配合XHR对象一起使用的</p> <p>前面我们收集到了很多值，现在，我们可以通过Ajax，将这些值提交给接口。</p> <ul><li>只能通过POST方式提交FormData对象</li> <li>不能设置Content-Type请求头，因为当提交FormData的时候，XHR对象会自动设置这个请求头。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    年龄：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    身高：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ajax提交数据到接口</span>
        <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/formdata'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// xhr.setRequestHeader(); // 使用FormData，不要设置请求头；写了请求头，反而会报错</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>如果提交FormData数据给接口，需要接口的支持。比如添加图书、添加评论接口都<strong>不支持</strong>提交FormData数据。</p></blockquote> <h3 id="formdata配合jquery使用"><a href="#formdata配合jquery使用" class="header-anchor">#</a> FormData配合jQuery使用</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    年龄：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    身高：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 使用FormData收集数据</span>
        <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入DOM对象哟~~~</span>
        <span class="token comment">// 使用$.ajax()提交</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/formdata'</span><span class="token punctuation">,</span>
            type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> fd<span class="token punctuation">,</span> <span class="token comment">// 这里直接使用FormData</span>
            processData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 必填项</span>
            contentType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 必填项</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>processData</strong>：</p> <p>前文讲，jQuery默认会把data转换成查询字符串格式，这里 <code>processData: false</code> ，表示不要把FormData对象转换成查询字符串。因为原生（底层）实现是 <code>xhr.send(fd)</code>，也是直接提交FormData对象的。</p> <p><strong>contentType</strong>:</p> <p>前文讲，提交FormData，不能自己设置Content-Type这个请求头，这里 <code>contentType: false</code>，表示不要设置这个请求头。</p> <h3 id="formdata和serialize的区别"><a href="#formdata和serialize的区别" class="header-anchor">#</a> FormData和serialize的区别</h3> <ul><li>FormData属于原生的代码；serialiaze和serializeArray是jQuery封装的方法</li> <li><strong>共同点：都需要设置表单各项的name属性。</strong></li> <li>jQuery中提交FormData，必须指定 <strong>processData: false</strong> 和 <strong>contentType: false</strong>。</li> <li>FormData可以收集文件域的值，而serialize不能。也就是说，<strong>如果有文件上传，必须使用FormData</strong>。</li> <li>得到的结果的数据类型不一样（知道即可）
<ul><li>FormData收集到的数据是JS对象格式；</li> <li>serialize得到的是查询字符串格式；</li> <li>serializeArray得到的是数组格式；</li></ul></li></ul> <h2 id="使用formdata的案例"><a href="#使用formdata的案例" class="header-anchor">#</a> 使用FormData的案例</h2> <h3 id="上传文件并显示进度条-原生代码"><a href="#上传文件并显示进度条-原生代码" class="header-anchor">#</a> 上传文件并显示进度条（原生代码）</h3> <p><strong>用到的接口</strong>：</p> <ul><li>请求方式：post</li> <li>接口地址：http://www.liulongbin.top:3006/api/upload/avatar</li> <li>请求参数（FormData对象）：
<ul><li>avatar -- 文件对象</li></ul></li></ul> <p><strong>实现过程</strong>：</p> <ol><li>先完成提交文件，即使用FormData获取文件域的内容，然后Ajax提交FormData对象给接口。</li> <li>再能够上传文件的基础之上，注册xhr.upload.onprogress事件，监听上传进度变化，制作进度条</li></ol> <p><strong>参考代码</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 设置一个进度条，这里使用h5新标签，开始隐藏 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 使用FormData收集输入框的值（这里是选择的图片）</span>
        <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ajax提交fd对象</span>
        <span class="token comment">// 接口文档，查看ppt即可</span>
        <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/*************************************************/</span>
        <span class="token comment">/*↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓*/</span>
        <span class="token comment">// 找到 进度条标签 </span>
        <span class="token keyword">var</span> progress <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 注册上传监听事件</span>
        xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            progress<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
            progress<span class="token punctuation">.</span>max <span class="token operator">=</span> e<span class="token punctuation">.</span>total<span class="token punctuation">;</span> <span class="token comment">// 文件总大小，单位字节</span>
            progress<span class="token punctuation">.</span>value <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span> <span class="token comment">// 已经上传了多少字节</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/*↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑*/</span>
        <span class="token comment">/************************************************/</span>
        
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/upload/avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>注意，上传进度使用xhr.upload.onprogress事件；下载进度使用xhr.onprogress事件；</p></blockquote> <h3 id="上传文件并显示进度条-jquery实现"><a href="#上传文件并显示进度条-jquery实现" class="header-anchor">#</a> 上传文件并显示进度条（jQuery实现）</h3> <ul><li><p>写基础的代码，实现文件上传</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 设置一个进度条，这里使用h5新标签，开始隐藏 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 使用FormData收集输入框的值（这里是选择的图片）</span>
        <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ajax提交fd对象</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/upload/avatar'</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> fd<span class="token punctuation">,</span>
            processData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            contentType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>加入xhr选项，写原生的代码，实现进度条</p> <ul><li>jQuery没有提供实现进度条的选项，但是提供了一个xhr选项，允许我们写原生的代码。最终实现进度条，还是通过原生的代码实现的。</li> <li>注意：使用xhr选项，必须<code>return xhr</code>;</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/upload/avatar'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> fd<span class="token punctuation">,</span>
    processData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    contentType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/*************************************************/</span>
    <span class="token comment">/*↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓*/</span>
    
    <span class="token function-variable function">xhr</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> progress <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 注册上传监听事件</span>
        xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            progress<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'max'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> xhr<span class="token punctuation">;</span> <span class="token comment">// 必须返回xhr</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/*↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑*/</span>
    <span class="token comment">/************************************************/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="第四天"><a href="#第四天" class="header-anchor">#</a> 第四天</h1> <blockquote><p>前面3天，已经把Ajax相关知识点讲解完毕。</p> <p>第4天，全天围绕一个综合案例，我们从页面布局，一直到完成页面的功能，都有自己写。</p> <p>案例使用单独的笔记，具体参考 “Ajax案例.md”</p></blockquote> <h2 id="案例说明"><a href="#案例说明" class="header-anchor">#</a> 案例说明</h2> <ul><li>案例需要完成对数据的增删改查4项操作。其中查询、添加、删除我们都已经做过。</li> <li>案例采用身份认证方式，即必须登录，才能完成数据的增删改查。</li> <li>登录后，只能操作自己的数据。即只能看到自己添加的数据，只能删除自己的数据，只能修改自己的数据。</li></ul> <p>案例接口文档：https://docs.apipost.cn/view/8675137ccc2b3ac0#3361314</p> <blockquote><p>案例是后面课程大事件项目的一部分。</p></blockquote> <h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h2> <ol><li>到线上演示地址（http://www.itcbc.com:8888/login.html），注册一个账号。</li></ol> <h2 id="创建案例目录"><a href="#创建案例目录" class="header-anchor">#</a> 创建案例目录</h2> <ul><li>项目中用到的lib文件夹，去资料里面复制。</li> <li>lib文件夹里面是项目所需的第三方文件，比如jquery.js、template-web.js、layui等等。</li></ul> <p>创建好的项目文件结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>|- code
	|- category.html   （分类的查询、添加、修改、删除）
	|- login.html      （完成登录功能）
	|- js              （存放自己的js文件）
	|- css             （存放自己的css文件）
	|- lib
		|- jquery.js
		|- template-web.js
		|- layui
</code></pre></div><h2 id="layui介绍"><a href="#layui介绍" class="header-anchor">#</a> layui介绍</h2> <h3 id="介绍-3"><a href="#介绍-3" class="header-anchor">#</a> 介绍</h3> <p>类似于bootstrap，<a href="https://www.layui.com/" target="_blank" rel="noopener noreferrer">layui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个经典模块化前端框架。</p> <ul><li>提供了大量基础类（比如背景颜色、布局、文字等），写页面的时候，可以直接使用这些类。</li> <li><strong>页面元素</strong>，可以轻松做出 <a href="https://www.layui.com/doc/element/icon.html" target="_blank" rel="noopener noreferrer">图标<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/element/button.html" target="_blank" rel="noopener noreferrer">按钮<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/element/form.html" target="_blank" rel="noopener noreferrer">表单<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/element/table.html" target="_blank" rel="noopener noreferrer">表格<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/element/panel.html" target="_blank" rel="noopener noreferrer">面板<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等页面元素。</li> <li><strong>内置模块</strong>，可以轻松实现网页常用功能，比如<a href="https://www.layui.com/doc/modules/form.html#verify" target="_blank" rel="noopener noreferrer">表单验证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/modules/laypage.html" target="_blank" rel="noopener noreferrer">分页<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/modules/flow.html" target="_blank" rel="noopener noreferrer">流加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/modules/layer.html" target="_blank" rel="noopener noreferrer">弹出层<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.layui.com/doc/modules/carousel.html" target="_blank" rel="noopener noreferrer">轮播图<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等效果。</li></ul> <p><a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer">详细的文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，让我们使用起来得心应手。</p> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <ul><li>如果只是做页面布局，一般只需要加载 /lib/layui/css/layui.css 即可。</li> <li>如果涉及到功能（比如弹出层等），还需要加载 /lib/layui/js/layui.all.js 文件。</li></ul> <h2 id="登录功能"><a href="#登录功能" class="header-anchor">#</a> 登录功能</h2> <h3 id="准备工作-2"><a href="#准备工作-2" class="header-anchor">#</a> 准备工作</h3> <ul><li>创建 js/login.js</li> <li>创建 css/login.css</li> <li>login.html 中，引入所需的文件
<ul><li>head区 引入 layui.css</li> <li>head区 引入 自己的 login.css</li> <li>body区 引入 jquery.js</li> <li>body区 引入 自己的 login.js</li></ul></li></ul> <h3 id="页面布局"><a href="#页面布局" class="header-anchor">#</a> 页面布局</h3> <p>表单区</p> <ul><li>去 layui官网 --&gt; 文档 --&gt; 页面元素（侧边栏） --&gt;  表单</li> <li>复制（form标签、输入框、按钮）</li> <li>自己稍微修改一下</li></ul> <p>图标</p> <ul><li>去 layui官网 --&gt; 文档 --&gt; 页面元素（侧边栏） --&gt;  图标</li></ul> <p>完整的HTML：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理系统<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 表单区域 start --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-form login-form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 第一行 用户名 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-icon layui-icon-username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">lay-verify</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>required<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入标题<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 第二行 密码 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-icon layui-icon-password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">lay-verify</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>required<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 第三行 按钮 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-form-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-btn layui-btn-fluid layui-bg-blue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lay-submit</span> <span class="token attr-name">lay-filter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formDemo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>立即提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 第四行 去注册 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-form-item right-a<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去注册账号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 表单区域 end --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>完整的css样式：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html, body</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* body {
    background: url();
} */</span>


<span class="token comment">/* 登录盒子 */</span>
<span class="token selector">.login</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 310px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token comment">/* left和top，50%指的是body的50% */</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span> 
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token comment">/* 下面的50%，指的是盒子自身的50% */</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.login-form</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.right-a</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 图标相关设置 */</span>
<span class="token selector">.layui-form-item</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.layui-icon</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.layui-input</span> <span class="token punctuation">{</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="完成登录功能"><a href="#完成登录功能" class="header-anchor">#</a> 完成登录功能</h3> <ul><li>异步提交账号密码</li> <li>成功后，跳转到category.html</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ---------------------  登录功能 ------------------------</span>
<span class="token comment">// 1. 监听表单提交事件</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.login-form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 2. 阻止表单提交</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. 收集表单中的数据（FormData or serialize 必须用serialize）</span>
    <span class="token comment">// 必须要检查表单各项的name属性值；让它和接口要求的参数名一致</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(data);</span>

    <span class="token comment">// 4. ajax提交给登录接口</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">'http://www.itcbc.com:8080/api/login'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> data<span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 登录成功，跳转到 category.html </span>
                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'category.html'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'登录失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="token原理"><a href="#token原理" class="header-anchor">#</a> token原理</h3> <ul><li><p>登录成功之后，登录接口会返回一个叫做 token 的字符串。</p></li> <li><p>token字符串，是客户端的身份凭证（车票、证件）</p></li> <li><p>客户端需要存储token字符串，一般存放到本地存储中，备用</p></li> <li><p>当请求以 <code>/my</code> 开头的接口的时候，必须在请求头中携带 <code>Authorization</code>，值是token字符串。否则不允许访问接口。（相当于必须带着自己的证件，才能正常请求这类接口）</p></li></ul> <p><img src="https://gitee.com/ye-xingchen/tuchuang/raw/master/img/image-20200817111233252.png" alt="image-20200817111233252"></p> <p>所以，当登录成功后，需要把 token 字符串保存到本地存储中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(res);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 先保存token，然后再跳转</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 登录成功，跳转到 category.html </span>
        location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'category.html'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'登录失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="类别页面布局"><a href="#类别页面布局" class="header-anchor">#</a> 类别页面布局</h2> <h3 id="准备工作-3"><a href="#准备工作-3" class="header-anchor">#</a> 准备工作</h3> <ul><li>创建所需的js文件、css文件</li> <li>category.html 中，加载所需的js文件和css文件</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lib/layui/css/layui.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/category.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lib/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lib/template-web.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 必须加载layui.all.js，因为页面中用到了很多layui提供的功能，比如弹层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lib/layui/layui.all.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 加载自己的js文件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/category.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="页面布局-2"><a href="#页面布局-2" class="header-anchor">#</a> 页面布局</h3> <ul><li>layui文档 --&gt; 页面元素（侧边栏） --&gt; 面板 --&gt; 卡片面板  --&gt;  复制代码，实现卡片布局</li> <li>自己写css，设置body的背景色，卡片区的外边距</li> <li>标题区
<ul><li>有一行文字</li> <li>一个按钮（layui文档--&gt;页面元素--&gt;按钮--&gt;复制代码）</li> <li>自己写css，调整标题区里的元素两端对齐</li></ul></li> <li>内容区
<ul><li>复制一个表格（layui文档--&gt;页面元素--&gt;表格--&gt;复制代码）</li> <li>调整列的宽度</li> <li>最后一列中，放编辑和删除两个按钮</li></ul></li></ul> <p>完整的HTML结构：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-card<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-card-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 标题区 --&gt;</span>
        文章类别管理
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-btn layui-btn-normal layui-btn-sm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加类别<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-card-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 内容区 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>colgroup</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>col</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>col</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>col</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 剩余的20% 就是第三列的宽度 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>colgroup</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>类别名称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>类别别名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>操作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>贤心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>2016-11-29<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-btn layui-btn-xs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-btn layui-btn-xs layui-btn-danger<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
                
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>完整的css代码：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f3f5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 调整卡片面板的边距 */</span>
<span class="token selector">.layui-card</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 设置标题区 */</span>
<span class="token selector">.layui-card-header</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token comment">/*上下居中对齐*/</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span> <span class="token comment">/*左右两端对齐*/</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="获取类别列表"><a href="#获取类别列表" class="header-anchor">#</a> 获取类别列表</h2> <h3 id="ajax请求-获取分类列表数据"><a href="#ajax请求-获取分类列表数据" class="header-anchor">#</a> ajax请求，获取分类列表数据</h3> <ul><li>在category.js中，封装renderCategory函数，里面发送ajax请求获取类别列表数据</li> <li>必须加请求头
<ul><li>请求头的键是 <code>Authorization</code></li> <li>请求头的值，获取本地存储中的 token。（登录后已经保存）</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------------------- 获取分类，渲染到页面中 ---------------------------</span>
<span class="token comment">// 直接封装成函数，目的是，添加完成、删除完成、修改完之后，还要调用这个函数来重新渲染页面</span>
<span class="token comment">// render -- 渲染</span>
<span class="token comment">// category -- 类别</span>
<span class="token comment">// ------------------------  获取类别列表，渲染到页面中 -----------------------</span>
<span class="token keyword">function</span> <span class="token function">renderCategory</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'http://www.itcbc.com:8080/my/category/list'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(res);</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 把数据 通过模板引擎 渲染到页面中</span>
                <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'tpl-list'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 把html放到tbody中</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置请求头</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Authorization: 'token字符串'</span>
            Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 别忘记调用函数哟~~~</span>
<span class="token function">renderCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="通过模板引擎渲染数据"><a href="#通过模板引擎渲染数据" class="header-anchor">#</a> 通过模板引擎渲染数据</h3> <p>HTML模板：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 类别列表模板 start --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token punctuation">{</span><span class="token punctuation">{</span>each data val<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>val<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>val<span class="token punctuation">.</span>alias<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-btn layui-btn-xs&quot;</span><span class="token operator">&gt;</span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-btn layui-btn-xs layui-btn-danger&quot;</span><span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 类别列表模板 end --&gt;</span>
</code></pre></div><h2 id="删除类别"><a href="#删除类别" class="header-anchor">#</a> 删除类别</h2> <h3 id="注册事件并获取分类id"><a href="#注册事件并获取分类id" class="header-anchor">#</a> 注册事件并获取分类id</h3> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//- 遍历数据的时候，给删除按钮加自定义属性 `data-id` ，值是 `{{val.id}}`。</span>
<span class="token comment">//- 必须使用事件委托的方式，给删除注册单击事件。</span>
</code></pre></div></li> <li></li></ul> <p>代码略。</p> <h3 id="使用弹出层"><a href="#使用弹出层" class="header-anchor">#</a> 使用弹出层</h3> <ul><li>文档位置：
<ul><li>layui文档 --&gt; 内置模块（侧边栏） --&gt; 弹出层 --&gt; 目录（右侧）--&gt; 内置方法 --&gt; 询问框</li></ul></li> <li>可以使用在线调试测试弹层的代码</li></ul> <blockquote><p>进入到弹出层页面之后，有一个独立版本的链接，通过这个链接，可以看到所有的弹层效果。</p></blockquote> <h3 id="发送ajax请求-完成删除"><a href="#发送ajax请求-完成删除" class="header-anchor">#</a> 发送Ajax请求，完成删除</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ------------------------  删除分类 -----------------------</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'button:contains(&quot;删除&quot;)'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取id</span>
    <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 询问是否要删除</span>
    layer<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'你是否要删除吗？'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something</span>

        <span class="token comment">// 点击确定，这个函数触发了</span>
        <span class="token comment">// console.log(id);</span>
        <span class="token comment">// 发送ajax请求进行删除操作</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            url<span class="token operator">:</span> <span class="token string">'http://www.itcbc.com:8080/my/category/delete'</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// console.log(res);</span>
                <span class="token comment">// 无论删除成功，还是失败，都给出提示</span>
                layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 删除成功，重新渲染页面</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">renderCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 设置请求头</span>
            headers<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// Authorization: 'token字符串'</span>
                Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 关闭弹层</span>
        layer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="添加类别"><a href="#添加类别" class="header-anchor">#</a> 添加类别</h2> <h3 id="点击按钮-实现弹层"><a href="#点击按钮-实现弹层" class="header-anchor">#</a> 点击按钮，实现弹层</h3> <ul><li><p>注册按钮的单击事件</p></li> <li><p>显示弹层</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 声明一个变量，让它表示弹层；后面关闭弹层时会用到它。</span>
<span class="token keyword">var</span> addIndex<span class="token punctuation">;</span>
<span class="token comment">// 一、点击添加分类，实现弹层</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'button:contains(&quot;添加类别&quot;)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addIndex <span class="token operator">=</span> layer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">'添加类别'</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tpl-add'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 内容在HTML中</span>
        area<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'500px'</span><span class="token punctuation">,</span> <span class="token string">'250px'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>HTML中，制作添加的模板，<strong>下面是一个演示效果</strong>。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 添加的模板 start --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl-add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
        类别名称：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        类别名称：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>确认添加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 添加的模板 end --&gt;</span>
</code></pre></div></li></ul> <h3 id="设置弹层的内容"><a href="#设置弹层的内容" class="header-anchor">#</a> 设置弹层的内容</h3> <ul><li>具体查看layui官网，去复制表单的内容。</li> <li>给 表单加一个类或者id，方便找到它。这里我加的是 <code>id=&quot;add-form&quot;</code></li> <li>设置input的name属性值，值必须和接口要求的请求参数一致。</li></ul> <p>完整的模板：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 添加的模板 start --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl-add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 表单去layui官网复制 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>form <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;add-form&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;margin: 15px 30px 0 0&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 第一项：类别名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form-item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form-label&quot;</span><span class="token operator">&gt;</span>类别名称<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-input-block&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> required lay<span class="token operator">-</span>verify<span class="token operator">=</span><span class="token string">&quot;required&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;请输入类别名称&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
                <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-input&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 第二项：类别别名 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form-item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form-label&quot;</span><span class="token operator">&gt;</span>类别别名<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-input-block&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;alias&quot;</span> required lay<span class="token operator">-</span>verify<span class="token operator">=</span><span class="token string">&quot;required&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;请输入类别别名&quot;</span> autocomplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
                <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-input&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 第三项：按钮（这个按钮去表单那复制） <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-form-item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-input-block&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-btn&quot;</span> lay<span class="token operator">-</span>submit lay<span class="token operator">-</span>filter<span class="token operator">=</span><span class="token string">&quot;formDemo&quot;</span><span class="token operator">&gt;</span>确认添加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;reset&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;layui-btn layui-btn-primary&quot;</span><span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 添加的模板 end --&gt;</span>
</code></pre></div><h3 id="提交表单数据-完成添加"><a href="#提交表单数据-完成添加" class="header-anchor">#</a> 提交表单数据，完成添加</h3> <ul><li>事件委托的方式，给添加的form注册submit事件</li> <li>使用 serialize 获取输入框的值（<code>注意：需要修改input的name属性</code>）</li> <li>ajax提交数据，完成添加</li> <li>添加成功，除了要渲染数据之外，还需要调用 <code>layer.close(addIndex)</code> 关闭弹层</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 二、提交表单数据，完成添加</span>
<span class="token comment">// 注册表单的submit事件</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token string">'#add-form'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 规律：如果没有图片上传，一般都不使用FormData。</span>
    <span class="token comment">// 具体：还得看接口要求</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一定要检查input是否有正确的name属性</span>
    <span class="token comment">// ajax提交数据，完成添加</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">'http://www.itcbc.com:8080/my/category/add'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> data<span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 无论成功失败，都提示</span>
            layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加成功</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">renderCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 关闭弹层</span>
                layer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>addIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置请求头</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Authorization: 'token字符串'</span>
            Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="编辑类别"><a href="#编辑类别" class="header-anchor">#</a> 编辑类别</h2> <h3 id="点击编辑按钮-实现弹出层"><a href="#点击编辑按钮-实现弹出层" class="header-anchor">#</a> 点击编辑按钮，实现弹出层</h3> <p><strong>复制添加的代码（html模板和js代码）即可。当然要稍作修改</strong></p> <ul><li>复制JS弹出层代码
<ul><li>弹出层的索引 <code>editIndex</code></li> <li>修改弹层的标题</li> <li>修改弹层的内容 <code>content: $('#tpl-edit').html()</code></li></ul></li> <li>复制添加类别的模板
<ul><li>修改模板的id为 <code>tpl-edit</code></li> <li>修改表单form的id 把 <code>add-form</code> 改为 <code>edit-form</code></li> <li>修改标题的文字和按钮文字</li> <li><strong>添加隐藏域id</strong> <code>&lt;input type=&quot;hidden&quot; name=&quot;id&quot; /&gt;</code> ，老师添加到按钮前面了</li></ul></li></ul> <blockquote><p>修改分类的接口，要求提交分类id，所以在表单中隐藏一个id。后面通过 serialize() 能够获取隐藏域的值。</p></blockquote> <h3 id="设置input的默认值"><a href="#设置input的默认值" class="header-anchor">#</a> 设置input的默认值</h3> <p><strong>☞ 重要</strong>：所有的编辑操作，都会有类似的，为input设置value的操作。</p> <p><strong>☞ 重要</strong>：这一个步骤，也叫做<strong>数据回填</strong>，或者叫做<strong>为表单赋值</strong>。</p> <p><strong>☞ 重要</strong>：做法也不一定一样，只要能够把输入框的默认值设置好即可。</p> <p>我们采用一个简单的办法，思路来源于删除操作，具体如下：</p> <ul><li>给编辑按钮添加三个自定义属性，分别存放当前分类的id、name、alias值</li> <li>点击编辑按钮的时候，获取事件源的三个自定义属性值</li> <li>当弹出层出现之后，找到input，设置他们的value值。</li></ul> <p>HTML的改变（设置编辑按钮的 data-xxx 属性值）：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layui-btn layui-btn-xs edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{val.id}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{val.name}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{val.alias}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>JS代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------------- 编辑 （点击 编辑，显示弹层） -----</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'button:contains(&quot;编辑&quot;)'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取事件源上的 三个 data-xxx 属性值</span>
    <span class="token keyword">var</span> zhi <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(zhi); // { name: 'xx', alias: 'xx', id: 2 }</span>
    <span class="token comment">// editIndex 表示当前的弹层；关闭弹层的时候，需要用到它</span>
    editIndex <span class="token operator">=</span> layer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">'编辑文章分类'</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tpl-edit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        area<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'500px'</span><span class="token punctuation">,</span> <span class="token string">'250px'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 弹层弹出后的回调，不要和ajax中的success弄混了</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 数据回填(不要忘记id)</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#edit-form input[name=&quot;name&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>zhi<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#edit-form input[name=&quot;alias&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>zhi<span class="token punctuation">.</span>alias<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#edit-form input[name=&quot;id&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>zhi<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="提交表单-完成编辑"><a href="#提交表单-完成编辑" class="header-anchor">#</a> 提交表单，完成编辑</h3> <ul><li>注册表单的submit事件</li> <li>获取输入框的值</li> <li>ajax提交给接口</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ----------------------- 编辑 （点击 确认修改，完成编辑） -----</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token string">'#edit-form'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 收集表单各项值</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ajax提交，完成修改</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> data<span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">'http://www.itcbc.com:8080/my/category/update'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 无论成功，还是失败，都给出提示</span>
            layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">renderCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                layer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>editIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置请求头</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// Authorization: 'token字符串'</span>
            Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="优化项目"><a href="#优化项目" class="header-anchor">#</a> 优化项目</h2> <p>统一配置url和headers和complete</p> <p>案例中，所有接口的根路径都一样，分类相关操作的接口都带了请求头，还有如果token过期了怎么处理。所有的这一切，我们可以写一个统一的处理文件common.js中。页面中只需要引入这个js文件即可。</p> <p>common.js代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 所有ajax请求，统一配置</span>

$<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// option 就是ajax选项；我们可以修改它，也可以增加一些选项</span>
    <span class="token comment">// 1. 统一配置url</span>
    option<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'http://www.itcbc.com:8080/'</span> <span class="token operator">+</span> option<span class="token punctuation">.</span>url<span class="token punctuation">;</span>

    <span class="token comment">// 2. 统一配置请求头</span>
    option<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. 请求完成后，如果接口返回“身份认证失败”，则需要跳转到登录页面</span>
    option<span class="token punctuation">.</span><span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">xhr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> res <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseJSON<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">'身份认证失败'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'./login.html'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>category.html中引入 common.js ，注意位置，必须在 category.js 引入之前。</p></li> <li><p>发送ajax请求，使用简短的url，不用写根路径了。</p></li> <li><p>不用每次发请求都写headers请求头了</p></li></ul> <blockquote><p>实际开发中，无非就是对数据增删改查。</p> <p>这是大事件项目中的一部分。后面的大事件课，就是许多套增删改查操作。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0d7c1303.js" defer></script><script src="/assets/js/2.1fe0b50b.js" defer></script><script src="/assets/js/8.0e4354f9.js" defer></script>
  </body>
</html>
